<nav class="page-breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink=".">Users</a></li>

    </ol>
</nav>

<div class="row" style="padding-left: 0.75rem; padding-right: 0.75rem;">
    <div class="col-md-12 bg-primary text-white" style="padding: 20px 12px 12px 12px; margin: 25px 0">
        <h2 class="mb-2">User Management </h2>
        <hr>
    </div>
</div>
<!--table start-->
<div class="row">
    <div class="col-md-12 stretch-card">
        <div class="card">
            <div class="card-body">

                <button [disabled]="isPageLoading" class="btn btn-primary float-right"
                    (click)="openLgModal(createModal)">Create New
                    User</button>


                <br>
                <br>
                <div class="table-responsive">

                    <table role="table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                        class="table table-hover">
                        <thead class="bg-secondary">
                            <tr>

                                <th hidden class="text-white">ID</th>
                                <th class="text-white">User name</th>
                                <th class="text-white">First Name</th>

                                <th class="text-white">Last Name</th>

                                <th class="text-white">Office Level</th>
                                <th class="text-white">Position</th>
                                <th class="text-white">Action</th>



                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let training of data;let i = index">

                                <td hidden>{{training.userId}}</td>
                                <td>


                                    <span>{{training.username}}</span>

                                </td>


                                <td>
                                    <span *ngIf="training.firstName == 'undefined' || training.firstName == 'null'">
                                    </span>
                                    <span *ngIf="training.FirstName  != 'undefined'">{{training.firstName}} </span>
                                </td>


                                <td>
                                    <span>{{training.surname}}</span>

                                </td>



                                <td>
                                    <span *ngIf="training.officeLevel == 'undefined' || training.officeLevel == 'null'">
                                    </span>
                                    <span *ngIf="training.officeLevel 'undefined'">{{training.officeLevel}}</span>
                                </td>

                                <td>
                                    <span *ngIf="training.position == 'undefined' || training.position == 'null'">
                                    </span>
                                    <span *ngIf="training.position 'undefined'">{{training.position}}</span>
                                </td>

                                <td>



                                    &nbsp;&nbsp;
                                    <a (click)="openEditModel4(editModal,i)"><i
                                            class="mdi mdi-pencil text-primary"></i></a>

                                    &nbsp;

                                    <a *ngIf="training.userActive == 'Active'" title="Activate"><i
                                            class="mdi mdi-lock-open text-success"
                                            (click)="DeactivaStatus(training.userId,training.firstName,training.surname,training.persal)"></i></a>
                                    <a *ngIf="training.userActive == 'Deactive'" title="Deactivated"><i
                                            class="mdi mdi-lock text-danger"
                                            (click)="ActivateStatus(training.userId,training.firstName,training.surname,training.persal)"></i></a>





                                </td>




                            </tr>
                        </tbody>

                    </table>
                </div>


                <div *ngIf="isPageLoading" class="text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>
<!--create model-->
<ng-template #createModalXXX let-modal>

    <div class="card">

        <div style="margin-top:0px ;" class="modal-header bg-primary text-white headingStyle2">
            <h4 class="modal-title text-white" id="exampleModalLabel">Create New User</h4>
            <button type="button" class="close text-white" (click)="modal.close('by: close icon')" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="card-body">
            <div>

                <form [formGroup]="validationForm">
                    <!--top haeder-->
                    <div class="row label-align">
                        <h6>Personal Information</h6>
                    </div>

                    <div class="row">

                        <div class="col-md-6">
                            <div class="form-check form-check-flat form-check-primary">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" [(ngModel)]="userType"
                                        formControlName="userType" value="GDE" (change)="clearPersalNumber('GDE')"
                                        [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.userType.errors }"
                                        required>
                                    <i class="input-frame"></i>
                                    GDE Employee<span class="required-asterisk">*</span>
                                </label>

                            </div>
                            <!-- <small *ngIf="isCreateFormSubmitted && createForm.userType.errors?.required"
                                class="text-danger justify-content-center">Please Choose One Option For User
                                Type </small> -->
                        </div>

                        <div class="col-md-6">
                            <div class="form-check form-check-flat form-check-primary">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" [(ngModel)]="userType"
                                        formControlName="userType" value="NonGDE" (change)="clearPersalNumber('NonGDE')"
                                        [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.userType.errors }"
                                        required>
                                    <i class="input-frame"></i>
                                    Non GDE Employee<span class="required-asterisk">*</span>
                                </label>

                            </div>

                        </div>
                        <small *ngIf="isCreateFormSubmitted && createForm.userType.errors?.required"
                            class="text-danger justify-content-center">Please select option above </small>

                    </div>

                    <!--persal number  field-->
                    <div class="row">
                        <!--persan number filed-->
                        <div *ngIf="userType =='GDE'" class="col-md-6">
                            <div class="form-group">
                                <label for="persal" class="required">Persal Number <span
                                        class="required-asterisk">*</span></label>
                                <input type="text" class="form-control" formControlName="persal" mask="00000000"
                                    (focus)="resetFlag()" (blur)="checkPersalDuplcate(persal)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.persal.errors || isCreateFormSubmitted && !persal}"
                                    [(ngModel)]="persal" id="persal" placeholder="Type here" name="persal">
                                <p *ngIf="isCreateFormSubmitted && !persal" class="invalid-feedback">
                                    Persal Number Required </p>
                                <p *ngIf="isCreateFormSubmitted && !createForm.persal.errors?.maxlength && persal"
                                    class="invalid-feedback">Persal Number Must Have Atleast 8 digits Only
                                </p>
                                <small class="text-danger" *ngIf="isDuplicate"> Persal number already registered</small>


                                <!---- <p *ngIf="uniquPersal" class="invalid-feedback" > The persal Number Exist</p>
              <p *ngIf="isCreateFormSubmitted && createForm.persal.errors?.required"  class="invalid-feedback">Persal number
                   required
                   </p>
               <p *ngIf="isCreateFormSubmitted && createForm.persal.errors?.required || uniquPersal" class="text-danger">exist</p>
                <p *ngIf="isCreateFormSubmitted && emptyUsernumber && nationality == 'Non South African'"
                    class="invalid-feedback">
                    Please provide the user's passport number or persal number
                </p>
                <p *ngIf="isCreateFormSubmitted && !createForm.persal.errors?.maxlength"
                    class="invalid-feedback">Persal number must have 8 digits
                </p>--->

                                <div *ngIf="createForm.persal.invalid &&  createForm.persal.errors && persal">
                                    <!----<small class="text-danger"  *ngIf="createForm.persal.hasError('required')">  This field is required. </small>-->
                                    <small class="text-danger" *ngIf="createForm.persal.hasError('minlength')">
                                        The minimum length for this field is
                                        {{createForm.persal.errors.minlength.requiredLength}} characters.
                                    </small>
                                    <small class="text-danger" *ngIf="createForm.persal.hasError('maxlength')">
                                        The maximum length for this field is
                                        {{createForm.persal.errors.maxlength.requiredLength}} characters.
                                    </small>

                                </div>



                            </div>
                        </div>


                    </div>

                    <!--citizen row-->
                    <div class="row">
                        <!---nationality filed-->
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="nationality">Nationality<span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="nationality" formControlName="nationality"
                                    (change)="resetNationality(nationality)" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.nationality.errors}">
                                    <option [value]="selectedType" disabled selected hidden>Please select</option>
                                    <option *ngFor="let e of citizenList" [value]=e.citizenship>{{e.citizenship}}
                                    </option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.nationality.errors?.required"
                                    class="invalid-feedback">
                                    Nationality Required</p>

                            </div>

                        </div>
                        <!--ID NUMBER FIELD-->
                        <div class="col-md-6">
                            <div class="form-group" *ngIf="nationality == 'South African' || !nationality">
                                <label for="idnumber" *ngIf="nationality">ID Number<span
                                        class="required-asterisk">*</span></label>
                                <label for="idnumber" *ngIf="!nationality">ID/Passport Number </label>
                                <input type="text" [disabled]="!nationality" class="form-control"
                                    formControlName="idnumber" (change)="UserName('create')" [(ngModel)]="idnumber"
                                    mask="0000000000000" (keyup)="validateIDnumber()"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.idnumber.errors || invalidIdNumber }"
                                    placeholder="Type here" pattern="[0-9]{13}" ngModel name="idnumber" required />
                                <!-- <p *ngIf="createForm.idnumber.errors?.pattern || invalidIdNumber" class="invalid-feedback">Not
                                                south african ID number</p> -->

                                <small class="text-danger" *ngIf="createForm.idnumber.errors?.idNumberExist">

                                    Id number already exist

                                </small>
                                <p *ngIf="isCreateFormSubmitted && createForm.idnumber.errors?.required"
                                    class="invalid-feedback">ID Number Required</p>
                                <!---- [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.idnumber.errors  || invalidIdNumber}" 
                                    <p *ngIf="uniqueIds"  class="asterisk"> This idNumber  Exist</p>
                                               [ngClass]="{'is-invalid':  createForm.idnumber.invalid &&
                    
                                   (createForm.idnumber.dirty || createForm.idnumber.touched)}"
                            <p *ngIf="isCreateFormSubmitted && noIDNumber" class="invalid-feedback">ID
                                   number required</p>
                                     <p *ngIf="isCreateFormSubmitted && createForm.idnumber.errors?.required"
                                    class="invalid-feedback">ID Number required</p>
                                      <p *ngIf="isCreateFormSubmitted && createForm.idnumber.errors?.required"
                                    class="invalid-feedback">idnumber required</p>
                               <p *ngIf="createForm.idnumber.errors?.pattern || invalidIdNumber"
                                   class="invalid-feedback">Invalid south african ID number</p>
                               <p *ngIf="isCreateFormSubmitted && uniquPersal  && createForm.persal.errors " class="invalid-feedback"> The persal Number Exist</p>
                                ---->

                                <div *ngIf="createForm.idnumber.invalid &&
                    
                                createForm.idnumber.errors &&
                    
                                        (createForm.idnumber.dirty || createForm.idnumber.touched)">

                                    <!----   <small class="text-danger"
                    
                                        *ngIf="createForm.idnumber.hasError('required')">
                    
                                        This field is required.
                    
                                    </small> -->

                                    <small class="text-danger" *ngIf="createForm.idnumber.hasError('minlength')">

                                        The minimum length for this field is
                                        {{createForm.idnumber.errors.minlength.requiredLength}} characters.

                                    </small>

                                    <small class="text-danger" *ngIf="createForm.idnumber.hasError('maxlength')">

                                        The maximum length for this field is
                                        {{createForm.idnumber.errors.maxlength.requiredLength}} characters.

                                    </small>

                                    <!----  <small class="text-danger"
                    
                                        *ngIf=" createForm.idnumber.errors?.idNumberExist">
                    
                                        Id number already exist
                    
                                    </small>---->

                                    <!-- <small *ngIf="createForm.idnumber.errors?.pattern" class="text-danger">Invalid South African
                                                    ID number</small> -->
                                    <small *ngIf="invalidIdNumber" class="text-danger">Invalid south african ID
                                        number</small>

                                </div>
                            </div>

                            <!--passport filed-->

                            <div class="form-group" *ngIf="nationality == 'Non South African'">
                                <label for="passport">Passport Number<span class="required-asterisk">*</span></label>
                                <input type="text" class="form-control" formControlName="passport"
                                    [(ngModel)]="passport" id="passport" (blur)="getUsername('create')"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.passport.errors }"
                                    placeholder="Type here" name="passport" required />
                                <p *ngIf="isCreateFormSubmitted && createForm.passport.errors?.required"
                                    class="invalid-feedback">Passport Required</p>

                                <small class="text-danger" *ngIf=" createForm.passport.errors?.passportExist">

                                    Passport already exist

                                </small>

                                <div *ngIf="createForm.passport.invalid &&
                    
                               createForm.passport.errors &&
                    
                                       (createForm.passport.dirty || createForm.passport.touched)">

                                    <!----    <small class="text-danger"
                    
                                       *ngIf="createForm.passport.hasError('required')">
                    
                                       This field is required.
                    
                                   </small>
                    
                               <small class="text-danger"
                    
                                       *ngIf=" createForm.passport.errors?.passportExist">
                    
                                       Passport already exist
                    
                                   </small> -->

                                </div>
                                <!--passport filed End
                                  [ngClass]="{'is-invalid': createForm.passport.invalid &&
                               (createForm.passport.dirty || createForm.passport.touched)}" -->


                            </div>
                        </div>


                    </div>

                    <!--- end citizen row-->
                    <!--gender start-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="gender">Gender <span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="gender" formControlName="gender"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.gender.errors}"
                                    class="form-control">


                                    <option [value]="selectedType" selected hidden disabled>Please select</option>
                                    <option *ngFor="let e of genderList" [value]=e.gender> {{e.gender}}</option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.gender.errors?.required"
                                    class="invalid-feedback">
                                    Gender Required</p>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="userName">UserName
                                </label>
                                <input class="form-control" [(ngModel)]="userName" formControlName="userName"
                                    name="userName" placeholder="Username here" disabled>

                            </div>

                        </div>
                    </div>
                    <!--gender end-->

                    <!---end of persal -->

                    <!---User Name And Surname Start-->

                    <div class="row">
                        <!--first name filed-->
                        <div class="col-md-6">
                            <label for="firstname">Name <span class="required-asterisk">*</span></label>
                            <input type="text" class="form-control" formControlName="firstname" [(ngModel)]="firstname"
                                minlength="3" placeholder="Type here"
                                [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.firstname.errors}">
                            <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.required"
                                class="invalid-feedback">
                                Name required</p>
                            <p *ngIf="isCreateFormSubmitted && isLenthInvalid(firstname) && firstname"
                                class="invalid-feedback">
                                Name Must Atleast Have 3 Characters
                            </p>

                            <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.pattern && firstname"
                                class="invalid-feedback">Name Must start With A Start Captial Letter</p>

                        </div>
                        <!--last name filed start-->

                        <div class="col-md-6">
                            <label for="Surname">Surname <span class="required-asterisk">*</span></label>
                            <input type="text" class="form-control" formControlName="surname" minlength="3"
                                [(ngModel)]="surname" name="surname" id="surname" autocomplete="off"
                                placeholder="Type here"
                                [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.surname.errors}">
                            <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.required"
                                class="invalid-feedback">
                                Surname Required</p>
                            <!-- <p class="text-danger mt-1" *ngIf="requried?.errors?.required">required error</p> -->
                            <p *ngIf="isCreateFormSubmitted && isLenthInvalid(surname) && surname"
                                class="invalid-feedback">
                                Surname Must Atleast Have 3 Characters
                            </p>

                            <p *ngIf="isCreateFormSubmitted && createForm.surname.errors?.pattern && surname"
                                class="invalid-feedback">Surname Must start With A Start Captial Letter</p>

                        </div>
                        <!--end of Last Name-->
                    </div>
                    <!--User Name And Surname End-->
                    <br>


                    <!---office level drop down-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="officelevel">Office Level <span class="required-asterisk">*</span></label>

                                <select [(ngModel)]="officelevel" formControlName="officelevel"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.officelevel.errors}"
                                    class="form-control" (change)="onChangeOffice(officelevel)"
                                    (change)="AdminRole(roletype)">
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option *ngFor="let office of OfficeLevelList"
                                        [hidden]="isLevelInvalid(office.officeLevel)" [value]=office.officeLevel>
                                        {{office.officeLevel}}
                                    </option>
                                </select>


                                <p *ngIf="isCreateFormSubmitted && createForm.officelevel.errors?.required"
                                    class="invalid-feedback">Office level required</p>
                            </div>


                        </div>



                        <!-- <div *ngIf="officelevel == 'District' && isAdmin || officelevel == 'Head Office'  && isAdmin"
                            class="col-md-3 inline-radio">
                            <div class="form-check form-check-flat form-check-primary">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" [(ngModel)]="roletype"
                                        formControlName="roletype" value="admin" (click)="AdminRole('admin')">
                                    <i class="input-frame"></i>
                                    System Administrator<span class="required-asterisk">*</span>
                                </label>
                                
                                
                            </div>
                        </div> -->
                        <!-- NON GDE filed start-->

                        <!-- <div *ngIf="officelevel == 'District' || officelevel == 'Head Office'"
                            class="col-md-3 inline-radio">
                            <div class="form-check form-check-flat form-check-primary">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" [(ngModel)]="roletype"
                                        formControlName="roletype" value="otherRole" (click)="AdminRole('otherRole')">
                                    <i class="input-frame"></i>
                                    Other Roles<span class="required-asterisk">*</span>
                                </label>

                            </div>
                        </div> -->

                    </div>


                    <!--end pf radio buttons-->
                    <div class="row">

                        <div *ngIf="roletype=='admin' && officelevel=='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="region">Region <span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="region" formControlName="region" name="region"
                                    (change)="onselectedregion(region)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.region.errors}"
                                    required>

                                    <option value="" hidden disabled selected>Please select</option>
                                    <option *ngFor="let reg of regionsData" value="{{reg}}">{{reg}}</option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.region.errors?.required"
                                    class="invalid-feedback">
                                    Region required</p>


                            </div>
                        </div>
                        <!----re-->
                        <div *ngIf="roletype=='admin' && officelevel=='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="districtName">District<span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="districtName" (change)="getDistrict(districtName)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.districtName.errors}"
                                    formControlName="districtName" name="districtName" required>
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option value="" [hidden]="region" disabled>Please select region</option>
                                    <option *ngFor="let dis of districtsData" [hidden]="!region" [value]="dis">{{dis |
                                        titlecase}}</option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.districtName.errors?.required"
                                    class="invalid-feedback">District required</p>

                            </div>

                        </div>



                    </div>
                    <!---position filed fo admini both Head and District-->
                    <div class="row">
                        <div *ngIf="roletype=='admin' && officelevel =='Head Office' || roletype=='admin' && officelevel =='District' "
                            class="col-md-6">
                            <div class="form-group">
                                <label for="position">Position <span class="required-asterisk">*</span></label>
                                <input class="form-control" value="System Administrator" readonly>

                            </div>
                        </div>
                    </div>
                    <!---head office fileld for other user-->

                    <div class="row">
                        <div *ngIf="roletype=='otherRole' && officelevel=='Head Office'"
                            style="margin-bottom: 1rem; margin-top: 1rem;" class="row" class="col-md-12">

                            <h6>Head Office Information</h6>
                        </div>
                        <!--branch Head Office-->
                        <div *ngIf="roletype=='otherRole' && officelevel=='Head Office' " class="col-md-6">
                            <div class="form-group">
                                <label for="Branch">Branch <span class="required-asterisk">*</span> </label>
                                <select [(ngModel)]="Branch" formControlName="Branch" name="Branch" class="form-control"
                                    (change)="onselectedbrach($event)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Branch.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of Branches" [ngValue]="c">{{c}}</option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.Branch.errors?.required"
                                    class="invalid-feedback">
                                    Branch Required</p>
                            </div>
                        </div>
                        <!---chied directorate -->
                        <div *ngIf="roletype == 'otherRole' && officelevel =='Head Office' " class="col-md-6">
                            <div class="form-group">
                                <label for="ChiefDirectorate">Chief Directorate <span
                                        class="required-asterisk">*</span></label>
                                <select [(ngModel)]="ChiefDirectorate" formControlName="ChiefDirectorate"
                                    name="ChiefDirectorate" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.ChiefDirectorate.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of BranchCD" [hidden]="!c" [ngValue]="c">{{c}}
                                    </option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.ChiefDirectorate.errors?.required"
                                    class="invalid-feedback">Chief Directorate Required</p>

                            </div>
                        </div>
                        <!----directorate-->
                        <div *ngIf="roletype == 'otherRole'&& officelevel =='Head Office' " class="col-md-6">
                            <div class="form-group">
                                <label for="Directorate">Directorate <span class="required-asterisk">*</span>
                                </label>
                                <select class="form-control" [(ngModel)]="Directorate" formControlName="Directorate"
                                    name="Directorate" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Directorate.errors}"
                                    required>
                                    <option [value]="selectedType" disabled selected hidden>Please select</option>
                                    <option *ngFor="let c of HODData" [hidden]="!c" [ngValue]="c">{{c}}</option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.Directorate.errors?.required"
                                    class="invalid-feedback">Directorate Required</p>
                            </div>
                        </div>
                        <!--sub directorate-->

                        <div *ngIf="roletype == 'otherRole' && officelevel =='Head Office' " class="col-md-6">
                            <div class="form-group">
                                <label for="SubDirectorate">Sub-Directorate <span
                                        class="required-asterisk">*</span></label>
                                <select class="form-control" [(ngModel)]="SubDirectorate"
                                    formControlName="SubDirectorate" name="SubDirectorate" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.SubDirectorate.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of HOSDData" [hidden]="!c" [ngValue]="c">{{c}}
                                    </option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.SubDirectorate.errors?.required"
                                    class="invalid-feedback">Sub-Directorate Required</p>
                            </div>

                        </div>
                        <!--position-->
                        <div *ngIf="roletype == 'otherRole' && officelevel =='Head Office' " class="col-md-6">

                            <div class="form-group">
                                <label for="position">Position<span class="required-asterisk">*</span></label>
                                <select class="form-control" [(ngModel)]="position" formControlName="position"
                                    name="position" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.position.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of HOPOsition" value="{{c}}">{{c}}
                                    </option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.position.errors?.required"
                                    class="invalid-feedback">Position Required</p>
                            </div>

                        </div>

                    </div>


                    <!--end of head office user--->


                    <!---district information office level-->

                    <div class="row">

                        <div *ngIf="roletype == 'otherRole' && officelevel =='District' "
                            style="margin-bottom: 1rem; margin-top: 1rem;" class="row" class="col-md-12">

                            <h6>District Information</h6>
                        </div>

                        <div *ngIf="roletype == 'otherRole' && officelevel =='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="region">Region<span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="region" formControlName="region" name="region"
                                    (change)="onselectedregion(region)" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.region.errors}"
                                    required>

                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let reg of regionsData" value="{{reg}}">{{reg}}</option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.region.errors?.required"
                                    class="invalid-feedback">
                                    Region Required</p>


                            </div>
                        </div>

                        <div *ngIf="roletype == 'otherRole' && officelevel =='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="districtName">District<span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="districtName"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.districtName.errors}"
                                    formControlName="districtName" class="form-control" name="districtName" required>
                                    <!-- <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let dis of districtsData" [ngValue]="dis">{{dis}}</option> -->
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option value="" [hidden]="region" disabled>Please select region</option>
                                    <option *ngFor="let dis of districtsData" [hidden]="!region" [value]="dis">{{dis |
                                        titlecase}}</option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.districtName.errors?.required"
                                    class="invalid-feedback">District Required</p>

                            </div>

                        </div>
                        <!-- <div *ngIf="roletype == 'otherRole' && officelevel =='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="Directorate">Directorate </label>

                                <select class="form-control" formControlName="Directorate" [(ngModel)]="Directorate"
                                    name="Directorate" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Directorate.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of dispositiondatadir" value="{{c}}">{{c}}</option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.Directorate.errors?.required"
                                    class="invalid-feedback">Directorate Required</p>
                            </div>
                        </div> -->
                        <div *ngIf="roletype == 'otherRole' && officelevel =='District'" class="col-md-6">
                            <div class="form-group">
                                <label for="SubDirectorate">Sub-Directorate <span
                                        class="required-asterisk">*</span></label>
                                <select class="form-control" formControlName="SubDirectorate"
                                    [(ngModel)]="SubDirectorate" name="SubDirectorate" class="form-control"
                                    (change)="Subdirectorate($event)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.SubDirectorate.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of dispositionsdatasub" value="{{c}}">{{c}}</option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.SubDirectorate.errors?.required"
                                    class="invalid-feedback">Sub-Directorate Required</p>
                            </div>
                        </div>
                        <div *ngIf="roletype == 'otherRole' && officelevel =='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="position">Position <span class="required-asterisk">*</span>
                                </label>
                                <select class="form-control" [(ngModel)]="position" formControlName="position"
                                    name="position" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.position.errors}"
                                    (change)="Position($event)" required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of dispositionsdataposition" value="{{c}}">{{c}}
                                    </option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.position.errors?.required"
                                    class="invalid-feedback">Position Required</p>
                            </div>
                            <!------>


                        </div>

                    </div>
                    <!---END OF District office-->

                    <!----School Office level-->
                    <div class="row">
                        <div *ngIf="officelevel =='School'" style="margin-bottom: 1rem; margin-top: 1rem;" class="row"
                            class="col-md-12">

                            <h6>School Information</h6>
                        </div>

                        <div *ngIf="showregions == true" class="col-md-6">
                            <div class="form-group" readonly>
                                <label for="region">Region</label>
                                <input class="form-control" style="background-color:#D3D3D3;" [(ngModel)]="region"
                                    formControlName="region" name="region">



                            </div>
                        </div>

                        <div *ngIf="showdistricts == true" class="col-md-6">
                            <div class="form-group">
                                <label for="districtName">District </label>


                                <input class="form-control" style="background-color:#D3D3D3 ;"
                                    [(ngModel)]="districtName" formControlName="districtName" name="districtName">



                            </div>

                        </div>

                        <div class="col-md-6">
                            <!--done validation-->
                            <div *ngIf="showschools == true" class="form-group">
                                <label for="selectedSchoolName">School <span class="required-asterisk">*</span></label>
                                <ng-select [items]="schoolsMain" bindLabel="institutionName" bindValue="institutionName"
                                    [(ngModel)]="selectedSchoolName" [searchable]="true" placeholder="Please select"
                                    [multiple]=false formControlName="selectedSchoolName"
                                    (change)="getSchoolInfo(selectedSchoolName)" [closeOnSelect]="true"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.selectedSchoolName.errors}"
                                    required (change)="onschoolchanges(selectedSchoolName)">

                                </ng-select>
                                <p *ngIf="isCreateFormSubmitted && createForm.selectedSchoolName.errors?.required"
                                    class="invalid-feedback">School Name Required</p>


                            </div>
                        </div>

                        <div *ngIf="ShowSchoolinfo == true" class="col-md-6">
                            <div class="form-group">
                                <label for="position">Position <span class="required-asterisk">*</span></label>

                                <select class="form-control" [(ngModel)]="position" formControlName="position"
                                    name="position" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.position.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>

                                    <option *ngFor="let e of schoolPositionList" [value]=e.schoolPosition>
                                        {{e.schoolPosition}}
                                    </option>
                                    <!--<option value="ADMIN">ADMIN</option>-->
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.position.errors?.required"
                                    class="invalid-feedback">Position Required</p>

                            </div>

                        </div>

                    </div>

                    <!--contact details-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cellNumber">Contact Number
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input class="form-control" formControlName="cellNumber" [(ngModel)]="cellNumber"
                                    id="cellNumber" mask="000 000 0000" placeholder="Type here" minlength="0"
                                    maxlength="12" (keyup)="fieldChange()"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.cellNumber.errors || isNumberInvalid && isCreateFormSubmitted || isCellnumberDuplicate}">
                                <!---- <p *ngIf="isCreateFormSubmitted && createForm.cellNumber.errors?.required"
                        class="invalid-feedback">Contact number required</p>
                    <p *ngIf="isCreateFormSubmitted && isNumberInvalid && !isCellnumberDuplicate && !createForm.cellNumber.errors?.required || isCreateFormSubmitted && !isCellnumberDuplicate && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                        class="invalid-feedback">Invalid contact number</p>
                    <p *ngIf="uniqueCellNumber" class="asterisk" > This Contact number Exist
                       </p>
                        
                    <p *ngIf="isCreateFormSubmitted && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                        class="invalid-feedback">Contact number must have 10 digits</p> -->
                                <p *ngIf="isCreateFormSubmitted && createForm.cellNumber.errors?.required"
                                    class="invalid-feedback">Contact Number Required</p>
                                <p *ngIf="isCreateFormSubmitted && isNumberInvalid && !isCellnumberDuplicate && !createForm.cellNumber.errors?.required || isCreateFormSubmitted && !isCellnumberDuplicate && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                                    class="invalid-feedback">Contact Number Must Start With 0 </p>
                                <div *ngIf="createForm.cellNumber.invalid &&
        
                        createForm.cellNumber.errors &&
        
                                (createForm.cellNumber.dirty || createForm.cellNumber.touched)">

                                    <!----  <small class="text-danger"
        
                                *ngIf="createForm.cellNumber.hasError('required')">
        
                                This field is required.
        
                            </small> -->

                                    <small class="text-danger" *ngIf="createForm.cellNumber.hasError('minlength')">

                                        The minimum length for this field is
                                        {{createForm.cellNumber.errors.minlength.requiredLength}} characters.

                                    </small>

                                    <small class="text-danger" *ngIf="createForm.cellNumber.hasError('maxlength')">

                                        The maximum length for this field is
                                        {{createForm.cellNumber.errors.maxlength.requiredLength}} characters.

                                    </small>

                                    <small class="text-danger" *ngIf="createForm.cellNumber.errors?.cellExist">

                                        Cell number already exist

                                    </small>

                                </div>


                            </div>
                        </div>
                        <!--email details-->
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="emailAddress">Email Address
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input type="email" class="form-control" formControlName="emailAddress"
                                    [(ngModel)]="emailAddress" id="emailAddress" placeholder="Type here"
                                    inputmode="email" pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.emailAddress.errors}">
                                <!----<p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.required"
                    class="invalid-feedback">Email address required</p>
                    <p *ngIf="uniqueMailAdress" class="asterisk">This Email address Exist</p>
                <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.pattern"
                    class="invalid-feedback">Invalid email address</p>---->
                                <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.required"
                                    class="invalid-feedback">Email Address Required</p>
                                <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.pattern"
                                    class="invalid-feedback">Invalid Email address</p>
                                <div *ngIf="createForm.emailAddress.invalid &&
        
                    createForm.emailAddress.errors &&
        
                            (createForm.emailAddress.dirty || createForm.emailAddress.touched)">

                                    <!---  <small class="text-danger"
        
                            *ngIf="createForm.emailAddress.hasError('required')">
        
                            This field is required.
        
                        </small> -->

                                    <small class="text-danger" *ngIf="createForm.emailAddress.errors?.emailExist">

                                        Email address already exist

                                    </small>

                                    <!---- <span class="text-danger"
        
                        *ngIf="createForm.emailAddress.errors?.email">
        
                        Enter a valid email address
        
                    </span>-->

                                </div>
                            </div>
                        </div>
                        <!--email details-->
                    </div>


                    <!---submit buttons-->
                </form>
            </div>
        </div>
        <div class="card-footer">

            <div class="row float-right">
                <button type="button" (click)="submit()" class="btn btn-primary mr-2" [disabled]="isLoading"><span
                        class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                        *ngIf="isLoading"></span>Submit</button>

                <button class="btn btn-warning mr-2" (click)="Cancel()" [disabled]="isLoading"><span
                        class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                        *ngIf="isLoading"></span>Cancel</button>
                <!---End of submit button-->
            </div>
        </div>
    </div>

</ng-template>


<ng-template #createModal let-modal>

    <div class="card">

        <div style="margin-top:0px ;" class="modal-header bg-primary text-white headingStyle2">
            <h4 class="modal-title text-white" id="exampleModalLabel">Create New User</h4>
            <button type="button" class="close text-white" (click)="modal.close('by: close icon')" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="card-body">
            <div>

                <form [formGroup]="validationForm">
                    <!--top haeder-->
                    <div class="row label-align">
                        <h6>Personal Information</h6>
                    </div>

                    <div class="row">

                        <div class="col-md-6">
                            <div class="form-check form-check-flat form-check-primary">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" [(ngModel)]="userType"
                                        formControlName="userType" value="GDE" (change)="clearPersalNumber('GDE')"
                                        [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.userType.errors }"
                                        required>
                                    <i class="input-frame"></i>
                                    GDE Employee<span class="required-asterisk">*</span>
                                </label>

                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-check form-check-flat form-check-primary">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" [(ngModel)]="userType"
                                        formControlName="userType" value="NonGDE" (change)="clearPersalNumber('NonGDE')"
                                        [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.userType.errors }"
                                        required>
                                    <i class="input-frame"></i>
                                    Non GDE Employee<span class="required-asterisk">*</span>
                                </label>

                            </div>

                        </div>
                        <small *ngIf="isCreateFormSubmitted && createForm.userType.errors?.required"
                            class="text-danger justify-content-center">Please select option above </small>

                    </div>

                    <!--persal number  field-->
                    <div class="row">
                        <!--persan number filed-->
                        <div *ngIf="userType =='GDE'" class="col-md-6">
                            <div class="form-group">
                                <label for="persal" class="required">Persal Number <span
                                        class="required-asterisk">*</span></label>
                                <input type="text" class="form-control" formControlName="persal" mask="00000000"
                                    (focus)="resetFlag()" (blur)="checkPersalDuplcate(persal)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.persal.errors || isCreateFormSubmitted && !persal}"
                                    [(ngModel)]="persal" id="persal" placeholder="Type here" name="persal">
                                <p *ngIf="isCreateFormSubmitted && !persal" class="invalid-feedback">
                                    Persal Number Required </p>
                                <p *ngIf="isCreateFormSubmitted && !createForm.persal.errors?.maxlength && persal"
                                    class="invalid-feedback">Persal Number Must Have Atleast 8 digits Only
                                </p>
                                <small class="text-danger" *ngIf="isDuplicate"> Persal number already registered</small>


                                <div *ngIf="createForm.persal.invalid &&  createForm.persal.errors && persal">
                                    <small class="text-danger" *ngIf="createForm.persal.hasError('minlength')">
                                        The minimum length for this field is
                                        {{createForm.persal.errors.minlength.requiredLength}} characters.
                                    </small>
                                    <small class="text-danger" *ngIf="createForm.persal.hasError('maxlength')">
                                        The maximum length for this field is
                                        {{createForm.persal.errors.maxlength.requiredLength}} characters.
                                    </small>

                                </div>



                            </div>
                        </div>


                    </div>

                    <!--citizen row-->
                    <div class="row">
                        <!---nationality filed-->
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="nationality">Nationality<span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="nationality" formControlName="nationality"
                                    (change)="resetNationality(nationality)" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.nationality.errors}">
                                    <option [value]="selectedType" disabled selected hidden>Please select</option>
                                    <option *ngFor="let e of citizenList" [value]=e.citizenship>{{e.citizenship}}
                                    </option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.nationality.errors?.required"
                                    class="invalid-feedback">
                                    Nationality Required</p>

                            </div>

                        </div>
                        <!--ID NUMBER FIELD-->
                        <div class="col-md-6">
                            <div class="form-group" *ngIf="nationality == 'South African' || !nationality">
                                <label for="idnumber" *ngIf="nationality">ID Number<span
                                        class="required-asterisk">*</span></label>
                                <label for="idnumber" *ngIf="!nationality">ID/Passport Number </label>
                                <input type="text" [disabled]="!nationality" class="form-control"
                                    formControlName="idnumber" (change)="UserName('create')" [(ngModel)]="idnumber"
                                    mask="0000000000000" (keyup)="validateIDnumber()"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.idnumber.errors || invalidIdNumber }"
                                    placeholder="Type here" pattern="[0-9]{13}" ngModel name="idnumber" required />


                                <small class="text-danger" *ngIf="createForm.idnumber.errors?.idNumberExist">

                                    Id number already exist

                                </small>
                                <p *ngIf="isCreateFormSubmitted && createForm.idnumber.errors?.required"
                                    class="invalid-feedback">ID Number Required</p>


                                <div *ngIf="createForm.idnumber.invalid && createForm.idnumber.errors &&                    
                                        (createForm.idnumber.dirty || createForm.idnumber.touched)">
                                    <small class="text-danger" *ngIf="createForm.idnumber.hasError('minlength')">

                                        The minimum length for this field is
                                        {{createForm.idnumber.errors.minlength.requiredLength}} characters.

                                    </small>

                                    <small class="text-danger" *ngIf="createForm.idnumber.hasError('maxlength')">

                                        The maximum length for this field is
                                        {{createForm.idnumber.errors.maxlength.requiredLength}} characters.

                                    </small>


                                    <small *ngIf="invalidIdNumber" class="text-danger">Invalid south african ID
                                        number</small>

                                </div>
                            </div>

                            <!--passport filed-->

                            <div class="form-group" *ngIf="nationality == 'Non South African'">
                                <label for="passport">Passport Number<span class="required-asterisk">*</span></label>
                                <input type="text" class="form-control" formControlName="passport"
                                    [(ngModel)]="passport" id="passport" (blur)="getUsername('create')"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.passport.errors }"
                                    placeholder="Type here" name="passport" required />
                                <p *ngIf="isCreateFormSubmitted && createForm.passport.errors?.required"
                                    class="invalid-feedback">Passport Required</p>

                                <small class="text-danger" *ngIf=" createForm.passport.errors?.passportExist">

                                    Passport already exist

                                </small>

                                <div *ngIf="createForm.passport.invalid &&
                    
                               createForm.passport.errors &&
                    
                                       (createForm.passport.dirty || createForm.passport.touched)">

                                    <!----    <small class="text-danger"
                    
                                       *ngIf="createForm.passport.hasError('required')">
                    
                                       This field is required.
                    
                                   </small>
                    
                               <small class="text-danger"
                    
                                       *ngIf=" createForm.passport.errors?.passportExist">
                    
                                       Passport already exist
                    
                                   </small> -->

                                </div>
                                <!--passport filed End
                                  [ngClass]="{'is-invalid': createForm.passport.invalid &&
                               (createForm.passport.dirty || createForm.passport.touched)}" -->


                            </div>
                        </div>


                    </div>

                    <!--- end citizen row-->
                    <!--gender start-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="gender">Gender <span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="gender" formControlName="gender"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.gender.errors}"
                                    class="form-control">


                                    <option [value]="selectedType" selected hidden disabled>Please select</option>
                                    <option *ngFor="let e of genderList" [value]=e.gender> {{e.gender}}</option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.gender.errors?.required"
                                    class="invalid-feedback">
                                    Gender Required</p>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="userName">UserName
                                </label>
                                <input class="form-control" [(ngModel)]="userName" formControlName="userName"
                                    name="userName" placeholder="Username here" disabled>

                            </div>

                        </div>
                    </div>
                    <!--gender end-->

                    <!---end of persal -->

                    <!---User Name And Surname Start-->

                    <div class="row">
                        <!--first name filed-->
                        <div class="col-md-6">
                            <label for="firstname">Name <span class="required-asterisk">*</span></label>
                            <input type="text" class="form-control" formControlName="firstname" [(ngModel)]="firstname"
                                minlength="3" placeholder="Type here"
                                [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.firstname.errors}">
                            <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.required"
                                class="invalid-feedback">
                                Name required</p>
                            <p *ngIf="isCreateFormSubmitted && isLenthInvalid(firstname) && firstname"
                                class="invalid-feedback">
                                Name Must Atleast Have 3 Characters
                            </p>

                            <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.pattern && firstname"
                                class="invalid-feedback">Name Must start With A Start Captial Letter</p>

                        </div>
                        <!--last name filed start-->

                        <div class="col-md-6">
                            <label for="Surname">Surname <span class="required-asterisk">*</span></label>
                            <input type="text" class="form-control" formControlName="surname" minlength="3"
                                [(ngModel)]="surname" name="surname" id="surname" autocomplete="off"
                                placeholder="Type here"
                                [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.surname.errors}">
                            <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.required"
                                class="invalid-feedback">
                                Surname Required</p>
                            <!-- <p class="text-danger mt-1" *ngIf="requried?.errors?.required">required error</p> -->
                            <p *ngIf="isCreateFormSubmitted && isLenthInvalid(surname) && surname"
                                class="invalid-feedback">
                                Surname Must Atleast Have 3 Characters
                            </p>

                            <p *ngIf="isCreateFormSubmitted && createForm.surname.errors?.pattern && surname"
                                class="invalid-feedback">Surname Must start With A Start Captial Letter</p>

                        </div>
                        <!--end of Last Name-->
                    </div>
                    <!--User Name And Surname End-->
                    <br>


                    <!---office level drop down-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="officelevel">Office Level <span class="required-asterisk">*</span></label>

                                <select [(ngModel)]="officelevel" formControlName="officelevel"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.officelevel.errors}"
                                    class="form-control" (change)="onChangeOffice(officelevel)"
                                    (change)="AdminRole(roletype)" *ngIf="isAdmin">
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option *ngFor="let office of OfficeLevelList" (click)="getPostionByBranch(office)"
                                        [hidden]="isLevelInvalid(office.officeLevel)" [value]=office.officeLevel>
                                        {{office.officeLevel}}
                                    </option>
                                </select>
                                <input *ngIf="!isAdmin" class="form-control" value="{{officelevel}}" readonly>


                                <p *ngIf="isCreateFormSubmitted && createForm.officelevel.errors?.required"
                                    class="invalid-feedback">Office level required</p>
                            </div>


                        </div>



                        <!-- <div *ngIf="officelevel == 'District' && isAdmin || officelevel == 'Head Office'  && loggedInRole != 'System Administrator' && isAdmin"
                            class="col-md-3 inline-radio">
                            <div class="form-check form-check-flat form-check-primary">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" [(ngModel)]="roletype"
                                        formControlName="roletype" value="admin" (click)="AdminRole('admin')">
                                    <i class="input-frame"></i>
                                    System Administrator<span class="required-asterisk">*</span>
                                </label>
                            </div>
                        </div> -->
                        <!-- NON GDE filed start-->
                        <!-- <div *ngIf="officelevel == 'District' || officelevel == 'Head Office'"
                            class="col-md-3 inline-radio">
                            <div class="form-check form-check-flat form-check-primary">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" [(ngModel)]="roletype"
                                        formControlName="roletype" value="otherRole" (click)="AdminRole('otherRole')">
                                    <i class="input-frame"></i>
                                    Other Roles<span class="required-asterisk">*</span>
                                </label>

                            </div>
                        </div> -->

                    </div>


                    <!--end pf radio buttons-->
                    <div class="row">
                        <div *ngIf="roletype == 'admin' && officelevel =='District' "
                            style="margin-bottom: 1rem; margin-top: 1rem;" class="row" class="col-md-12">

                            <h6>District Information</h6>
                        </div>
                        <div *ngIf="roletype=='admin' && officelevel=='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="region">Region <span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="region" formControlName="region" name="region"
                                    (change)="onselectedregion(region)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.region.errors}"
                                    required>

                                    <option value="" hidden disabled selected>Please select</option>
                                    <option *ngFor="let reg of regionsData" value="{{reg}}">{{reg}}</option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.region.errors?.required"
                                    class="invalid-feedback">
                                    Region required</p>


                            </div>
                        </div>
                        <!----re-->
                        <div *ngIf="roletype=='admin' && officelevel=='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="districtName">District<span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="districtName" (change)="getDistrict(districtName)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.districtName.errors}"
                                    formControlName="districtName" name="districtName" required>
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option value="" [hidden]="region" disabled>Please select region</option>
                                    <option *ngFor="let dis of districtsData" [hidden]="!region" [value]="dis">{{dis |
                                        titlecase}}</option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.districtName.errors?.required"
                                    class="invalid-feedback">District required</p>

                            </div>

                        </div>



                    </div>
                    <!---position filed fo admini both Head and District-->
                    <div class="row">
                        <div *ngIf="roletype=='admin' && officelevel =='Head Office' || roletype=='admin' && officelevel =='District' "
                            class="col-md-6">
                            <div class="form-group">
                                <label for="position">Position <span class="required-asterisk">*</span></label>
                                <input class="form-control" value="System Administrator" readonly>

                            </div>
                        </div>
                    </div>
                    <!---head office fileld for other user-->

                    <div class="row">
                        <div *ngIf="roletype=='otherRole' && officelevel=='Head Office'"
                            style="margin-bottom: 1rem; margin-top: 1rem;" class="row" class="col-md-12">

                            <h6>Head Office Information</h6>
                        </div>
                        <!--branch Head Office-->
                        <div *ngIf="roletype=='otherRole' && officelevel=='Head Office' " class="col-md-6">
                            <div class="form-group">

                                <label for="Branch">Branch <span class="required-asterisk">*</span> </label>
                                <select *ngIf="isAdmin" [(ngModel)]="Branch" formControlName="Branch" name="Branch"
                                    class="form-control" (change)="selectBranch(Branch,'create')"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Branch.errors}"
                                    required>
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option *ngFor="let branch of allBranches; let i = index"
                                        (click)="setId(branch, 'branch')"
                                        value="{{branch.branchId}}#;{{branch.branchName}}#;{{branch.id}}">
                                        {{branch.branchName}}
                                    </option>
                                    <!-- <option *ngFor="let branch of allBranches" value="{{branch}}">
                                        {{branch}}
                                    </option> -->

                                </select>
                                <input *ngIf="!isAdmin" class="form-control" value="{{Branch}}" readonly>

                                <p *ngIf="isCreateFormSubmitted && createForm.Branch.errors?.required"
                                    class="invalid-feedback"> Branch required</p>
                            </div>
                        </div>
                        <!---chied directorate -->
                        <div *ngIf="roletype == 'otherRole' && officelevel =='Head Office' " class="col-md-6">
                            <div class="form-group">
                                <label for="ChiefDirectorate">Chief Directorate <span
                                        class="required-asterisk">*</span></label>

                                <select *ngIf="isAdmin" [(ngModel)]="ChiefDirectorate"
                                    formControlName="ChiefDirectorate" name="ChiefDirectorate" class="form-control"
                                    (change)="selectChiefDirectorate(ChiefDirectorate)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.ChiefDirectorate.errors}"
                                    required>
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option value="" [hidden]="Branch" disabled>Please select branch first</option>
                                    <option *ngFor="let cd of chiefDirectorates" [hidden]="!cd || !Branch"
                                        value="{{cd.id}}#;{{cd.chiefDirectorateName}}">
                                        {{cd.chiefDirectorateName}} </option>

                                </select>
                                <input *ngIf="!isAdmin" class="form-control" value="{{ChiefDirectorate}}" readonly>

                                <p *ngIf="isCreateFormSubmitted && createForm.ChiefDirectorate.errors?.required"
                                    class="invalid-feedback">Chief Directorate Required</p>

                            </div>
                        </div>
                        <!----directorate-->
                        <div *ngIf="roletype == 'otherRole'&& officelevel =='Head Office' " class="col-md-6">
                            <div class="form-group">
                                <label for="Directorate">Directorate <span class="required-asterisk">*</span>
                                </label>

                                <select *ngIf="isAdmin" class="form-control" [(ngModel)]="Directorate"
                                    formControlName="Directorate" name="Directorate" class="form-control"
                                    (change)="selectDirectorate(Directorate)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Directorate.errors}"
                                    required>
                                    <option [value]="selectedType" disabled selected hidden>Please select</option>
                                    <option value="" [hidden]="ChiefDirectorate" disabled>Please select chief
                                        directorate first</option>
                                    <option *ngFor="let dir of directorates" [hidden]="!ChiefDirectorate"
                                        value="{{dir.id}}#;{{dir.directorateName}}">
                                        {{dir.directorateName}} </option>
                                    <!-- <option *ngFor="let dir of directorates" [hidden]="!dir || !ChiefDirectorate"
                                        [value]="dir">{{dir}}</option> -->
                                </select>
                                <input *ngIf="!isAdmin" class="form-control" value="{{Directorate}}" readonly>

                                <p *ngIf="isCreateFormSubmitted && createForm.Directorate.errors?.required"
                                    class="invalid-feedback">Directorate required</p>
                            </div>
                        </div>
                        <!--sub directorate-->

                        <div *ngIf="roletype == 'otherRole' && officelevel =='Head Office' " class="col-md-6">
                            <div class="form-group">
                                <label for="SubDirectorate">Sub-Directorate <span
                                        *ngIf="subDirectorates.length == 0 && !Directorate || subDirectorates.length > 0"
                                        class="required-asterisk">*</span></label>
                                <select class="form-control" [(ngModel)]="SubDirectorate"
                                    *ngIf="subDirectorates.length == 0 && !Directorate || subDirectorates.length > 0"
                                    formControlName="SubDirectorate" name="SubDirectorate" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.SubDirectorate.errors}"
                                    required>
                                    <option [value]="selectedType" style="color: lightgrey;" hidden disabled selected>
                                        Please select</option>
                                    <option value="" [hidden]="Directorate" disabled>Please select directorate
                                        first</option>
                                    <option *ngFor="let sub of subDirectorates" [hidden]="!Directorate"
                                        value="{{sub.id}}#;{{sub.subDirectorateName}}">
                                        {{sub.subDirectorateName}} </option>
                                    <!-- <option *ngFor="let sub of subDirectorates" [hidden]="!sub || !Directorate"
                                        [value]="sub">{{sub}}
                                    </option> -->
                                </select>
                                <input *ngIf="subDirectorates.length == 0 && Directorate" class="form-control"
                                    placeholder="No Sub-Directorates" readonly>
                                <!-- <input *ngIf="!isAdmin" class="form-control" value="{{Directorate}}" readonly> -->
                                <p *ngIf="isCreateFormSubmitted && createForm.SubDirectorate.errors?.required"
                                    class="invalid-feedback">Sub-Directorate required</p>
                            </div>

                        </div>
                        <!--position-->
                        <div *ngIf="roletype == 'otherRole' && officelevel =='Head Office' " class="col-md-6">

                            <div class="form-group">
                                <label for="position">Position<span class="required-asterisk">*</span></label>
                                <select class="form-control" [(ngModel)]="position" formControlName="position"
                                    name="position" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.position.errors}"
                                    required>
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option value="" [hidden]="Branch" disabled>Please select branch
                                        first</option>
                                    <option *ngFor="let position of positions"
                                        [hidden]="!Branch || isFromBranch(position.id, Branch) || !position.position"
                                        value="{{position.position}}">
                                        {{position.position}}
                                    </option>
                                    <!-- <option *ngFor="let position of positions" [hidden]="!Branch || !position"
                                        value="{{position}}">{{position}}
                                    </option> -->
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.position.errors?.required"
                                    class="invalid-feedback">Position Required</p>
                            </div>

                        </div>

                    </div>


                    <!--end of head office user--->


                    <!---district information office level-->

                    <div class="row">

                        <div *ngIf="roletype == 'otherRole' && officelevel =='District' "
                            style="margin-bottom: 1rem; margin-top: 1rem;" class="row" class="col-md-12">

                            <h6>District Information</h6>
                        </div>

                        <div *ngIf="roletype == 'otherRole' && officelevel =='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="region">Region<span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="region" formControlName="region" name="region"
                                    (change)="onselectedregion(region)" class="form-control" *ngIf="isAdmin"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.region.errors}"
                                    required>

                                    <option value="" hidden disabled selected>Please select</option>
                                    <option *ngFor="let reg of regionsData" value="{{reg}}">{{reg}}</option>
                                </select>
                                <input *ngIf="!isAdmin" class="form-control" value="{{region}}" readonly>
                                <p *ngIf="isCreateFormSubmitted && createForm.region.errors?.required"
                                    class="invalid-feedback">
                                    Region Required</p>


                            </div>
                        </div>

                        <div *ngIf="roletype == 'otherRole' && officelevel =='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="districtName">District<span class="required-asterisk">*</span></label>
                                <select [(ngModel)]="districtName" *ngIf="isAdmin"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.districtName.errors}"
                                    formControlName="districtName" class="form-control" name="districtName" required>
                                    <!-- <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let dis of districtsData" [ngValue]="dis">{{dis}}</option> -->
                                    <option value="" hidden disabled selected>Please select</option>
                                    <option value="" [hidden]="region" disabled>Please select region</option>
                                    <option *ngFor="let dis of districtsData" [hidden]="!region" [value]="dis">{{dis |
                                        titlecase}}</option>

                                </select>
                                <input *ngIf="!isAdmin" class="form-control" value="{{districtName | titlecase}}"
                                    readonly>
                                <p *ngIf="isCreateFormSubmitted && createForm.districtName.errors?.required"
                                    class="invalid-feedback">District Required</p>

                            </div>

                        </div>
                        <!-- <div *ngIf="roletype == 'otherRole' && officelevel =='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="Directorate">Directorate </label>

                                <select class="form-control" formControlName="Directorate" [(ngModel)]="Directorate"
                                    name="Directorate" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Directorate.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of dispositiondatadir" [hidden]="!c" value="{{c}}">{{c}}
                                    </option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.Directorate.errors?.required"
                                    class="invalid-feedback">Directorate required</p>
                            </div>
                        </div> -->
                        <div *ngIf="roletype == 'otherRole' && officelevel =='District'" class="col-md-6">
                            <div class="form-group">
                                <label for="SubDirectorate">Sub-Directorate <span
                                        class="required-asterisk">*</span></label>
                                <select class="form-control" formControlName="SubDirectorate"
                                    [(ngModel)]="SubDirectorate" name="SubDirectorate" class="form-control"
                                    (change)="Subdirectorate($event)"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.SubDirectorate.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of dispositionsdatasub" [hidden]="!c" value="{{c}}">{{c}}
                                    </option>
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.SubDirectorate.errors?.required"
                                    class="invalid-feedback">Sub-Directorate Required</p>
                            </div>
                        </div>
                        <div *ngIf="roletype == 'otherRole' && officelevel =='District' " class="col-md-6">
                            <div class="form-group">
                                <label for="position">Position <span class="required-asterisk">*</span>
                                </label>
                                <select class="form-control" [(ngModel)]="position" formControlName="position"
                                    name="position" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.position.errors}"
                                    (change)="Position($event)" required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>
                                    <option *ngFor="let c of dispositionsdataposition" [hidden]="!c" value="{{c}}">{{c}}
                                    </option>

                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.position.errors?.required"
                                    class="invalid-feedback">Position Required</p>
                            </div>
                            <!------>


                        </div>

                    </div>
                    <!---END OF District office-->

                    <!----School Office level-->
                    <div class="row">
                        <div *ngIf="officelevel =='School'" style="margin-bottom: 1rem; margin-top: 1rem;" class="row"
                            class="col-md-12">

                            <h6>School Information</h6>
                        </div>

                        <div *ngIf="showregions == true" class="col-md-6">
                            <div class="form-group" readonly>
                                <label for="region">Region</label>
                                <input class="form-control" style="background-color:#D3D3D3;" [(ngModel)]="region"
                                    formControlName="region" name="region">



                            </div>
                        </div>

                        <div *ngIf="showdistricts == true" class="col-md-6">
                            <div class="form-group">
                                <label for="districtName">District </label>


                                <input class="form-control" style="background-color:#D3D3D3 ;"
                                    [(ngModel)]="districtName" formControlName="districtName" name="districtName">



                            </div>

                        </div>

                        <div class="col-md-6">
                            <!--done validation-->
                            <div *ngIf="showschools == true" class="form-group">
                                <label for="selectedSchoolName">School <span class="required-asterisk">*</span></label>
                                <ng-select [items]="schoolsMain" bindLabel="institutionName" bindValue="institutionName"
                                    [(ngModel)]="selectedSchoolName" [searchable]="true" placeholder="Please select"
                                    [multiple]=false formControlName="selectedSchoolName"
                                    (change)="getSchoolInfo(selectedSchoolName)" [closeOnSelect]="true"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.selectedSchoolName.errors}"
                                    required (change)="onschoolchanges(selectedSchoolName)">

                                </ng-select>
                                <p *ngIf="isCreateFormSubmitted && createForm.selectedSchoolName.errors?.required"
                                    class="invalid-feedback">School Name Required</p>


                            </div>
                        </div>

                        <div *ngIf="ShowSchoolinfo == true" class="col-md-6">
                            <div class="form-group">
                                <label for="position">Position <span class="required-asterisk">*</span></label>

                                <select class="form-control" [(ngModel)]="position" formControlName="position"
                                    name="position" class="form-control"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.position.errors}"
                                    required>
                                    <option [value]="selectedType" hidden disabled selected>Please select</option>

                                    <option *ngFor="let e of schoolPositionList" [value]=e.schoolPosition>
                                        {{e.schoolPosition}}
                                    </option>
                                    <!--<option value="ADMIN">ADMIN</option>-->
                                </select>
                                <p *ngIf="isCreateFormSubmitted && createForm.position.errors?.required"
                                    class="invalid-feedback">Position Required</p>

                            </div>

                        </div>

                    </div>

                    <!--contact details-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cellNumber">Contact Number
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input class="form-control" formControlName="cellNumber" [(ngModel)]="cellNumber"
                                    id="cellNumber" mask="000 000 0000" placeholder="Type here" minlength="0"
                                    maxlength="12" (keyup)="fieldChange()"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.cellNumber.errors || isNumberInvalid && isCreateFormSubmitted || isCellnumberDuplicate}">
                                <!---- <p *ngIf="isCreateFormSubmitted && createForm.cellNumber.errors?.required"
                        class="invalid-feedback">Contact number required</p>
                    <p *ngIf="isCreateFormSubmitted && isNumberInvalid && !isCellnumberDuplicate && !createForm.cellNumber.errors?.required || isCreateFormSubmitted && !isCellnumberDuplicate && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                        class="invalid-feedback">Invalid contact number</p>
                    <p *ngIf="uniqueCellNumber" class="asterisk" > This Contact number Exist
                       </p>
                        
                    <p *ngIf="isCreateFormSubmitted && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                        class="invalid-feedback">Contact number must have 10 digits</p> -->
                                <p *ngIf="isCreateFormSubmitted && createForm.cellNumber.errors?.required"
                                    class="invalid-feedback">Contact Number Required</p>
                                <p *ngIf="isCreateFormSubmitted && isNumberInvalid && !isCellnumberDuplicate && !createForm.cellNumber.errors?.required || isCreateFormSubmitted && !isCellnumberDuplicate && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                                    class="invalid-feedback">Contact Number Must Start With 0 </p>
                                <div *ngIf="createForm.cellNumber.invalid &&
        
                        createForm.cellNumber.errors &&
        
                                (createForm.cellNumber.dirty || createForm.cellNumber.touched)">

                                    <!----  <small class="text-danger"
        
                                *ngIf="createForm.cellNumber.hasError('required')">
        
                                This field is required.
        
                            </small> -->

                                    <small class="text-danger" *ngIf="createForm.cellNumber.hasError('minlength')">

                                        The minimum length for this field is
                                        {{createForm.cellNumber.errors.minlength.requiredLength}} characters.

                                    </small>

                                    <small class="text-danger" *ngIf="createForm.cellNumber.hasError('maxlength')">

                                        The maximum length for this field is
                                        {{createForm.cellNumber.errors.maxlength.requiredLength}} characters.

                                    </small>

                                    <small class="text-danger" *ngIf=" createForm.cellNumber.errors?.cellExist">

                                        Cell number already exist

                                    </small>

                                </div>


                            </div>
                        </div>
                        <!--email details-->
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="emailAddress">Email Address
                                    <span class="required-asterisk">*</span>
                                </label>
                                <input type="email" class="form-control" formControlName="emailAddress"
                                    [(ngModel)]="emailAddress" id="emailAddress" placeholder="Type here"
                                    inputmode="email" pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                                    [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.emailAddress.errors}">
                                <!----<p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.required"
                    class="invalid-feedback">Email address required</p>
                    <p *ngIf="uniqueMailAdress" class="asterisk">This Email address Exist</p>
                <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.pattern"
                    class="invalid-feedback">Invalid email address</p>---->
                                <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.required"
                                    class="invalid-feedback">Email Address Required</p>
                                <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.pattern"
                                    class="invalid-feedback">Invalid Email address</p>
                                <div *ngIf="createForm.emailAddress.invalid &&
        
                    createForm.emailAddress.errors &&
        
                            (createForm.emailAddress.dirty || createForm.emailAddress.touched)">

                                    <!---  <small class="text-danger"
        
                            *ngIf="createForm.emailAddress.hasError('required')">
        
                            This field is required.
        
                        </small> -->

                                    <small class="text-danger" *ngIf="createForm.emailAddress.errors?.emailExist">

                                        Email address already exist

                                    </small>

                                    <!---- <span class="text-danger"
        
                        *ngIf="createForm.emailAddress.errors?.email">
        
                        Enter a valid email address
        
                    </span>-->

                                </div>
                            </div>
                        </div>
                        <!--email details-->
                    </div>


                    <!---submit buttons-->
                </form>
            </div>
        </div>
        <div class="card-footer">

            <div class="row float-right">
                <button type="button" (click)="submit()" class="btn btn-primary mr-2" [disabled]="isLoading"><span
                        class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                        *ngIf="isLoading"></span>Submit</button>
                <button class="btn btn-warning mr-2" (click)="Cancel()" [disabled]="isLoading"><span
                        class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                        *ngIf="isLoading"></span>Cancel</button>
                <!---End of submit button-->
            </div>
        </div>
    </div>

</ng-template>


<!--create model-end -->
<!---New Updated Moadal For Edit-->
<ng-template #editModal let-modal>


    <div class="card">

        <div style="margin-top:0px ;" class="modal-header bg-primary text-white headingStyle2">
            <h4 class="modal-title text-white" id="exampleModalLabel">Update User Profile</h4>
            <button type="button" class="close text-white" (click)="modal.close('by: close icon')" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>


        <div class="card-body">
            <form [formGroup]="validatioUpdateForm">

                <div class="row label-align">
                    <h6>Personal Information</h6>
                </div>
                <!--start form-->
                <div class="row">
                    <!--GDE filed-->
                    <div class="col-md-6">
                        <div class="form-check form-check-flat form-check-primary">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" [(ngModel)]="updateUserType"
                                    (click)="clearUpdatePersalNumber('GDE')" formControlName="updateUserType"
                                    value="GDE">
                                <i class="input-frame"></i>
                                GDE Employee<span class="required-asterisk">*</span>
                            </label>
                        </div>
                    </div>
                    <!-- NON GDE filed start-->

                    <div class="col-md-6">
                        <div class="form-check form-check-flat form-check-primary">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" [(ngModel)]="updateUserType"
                                    formControlName="updateUserType" value="NonGDE"
                                    (click)="clearUpdatePersalNumber('NonGDE')">
                                <i class="input-frame"></i>
                                Non GDE Employee<span class="required-asterisk">*</span>
                            </label>
                        </div>
                    </div>
                    <!--end of Last Name-->
                    <p *ngIf="isEditFormSubmitted && !updateUserType || isEditFormSubmitted && updateForms.updateUserType.errors?.required"
                        class="invalid">
                        Please select option above </p>
                </div>
                <!---persal number and GDE Start Row-->
                <div class="row">
                    <!--GDE Checkbox-->

                    <!--persan number filed-->
                    <div class="col-md-6" *ngIf="updateUserType == 'GDE'">
                        <div class="form-group">
                            <label for="updatePersal" class="required">Persal Number <span
                                    class="required-asterisk">*</span></label>
                            <input type="text" class="form-control" formControlName="updatePersal" mask="00000000"
                                minlength="8" maxlength="8" (blur)="getUsername('update')"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updatePersal.errors }"
                                [(ngModel)]="updatePersal" id="updatePersal" placeholder="Type here" name="updatePersal"
                                required />
                            <p *ngIf="isEditFormSubmitted && updateForms.updatePersal.errors?.required"
                                class="invalid-feedback">Persal number Required
                            </p>
                            <p *ngIf="isEditFormSubmitted && !updateForms.updatePersal.errors?.maxlength"
                                class="invalid-feedback">Persal number must have 8 digits
                            </p>
                            <!---- <p *ngIf="uniquPersal" class="invalid-feedback" > The persal Number Exist</p>
                      <p *ngIf="isCreateFormSubmitted && createForm.persal.errors?.required"  class="invalid-feedback">Persal number
                           required
                           </p>
                      
                        <p *ngIf="isCreateFormSubmitted && emptyUsernumber && nationality == 'Non South African'"
                            class="invalid-feedback">
                            Please provide the user's passport number or persal number
                        </p>
                        <p *ngIf="isCreateFormSubmitted && !createForm.persal.errors?.maxlength"
                            class="invalid-feedback">Persal number must have 8 digits
                        </p>--->

                            <div *ngIf="updateForms.updatePersal.invalid &&  updateForms.updatePersal.errors ">
                                <!----<small class="text-danger"  *ngIf="updateBranch.persal.hasError('required')">  This field is required. </small>-->
                                <small class="text-danger" *ngIf="updateForms.updatePersal.hasError('minlength')">
                                    The minimum length for this field is
                                    {{updateForms.updatePersal.errors.minlength.requiredLength}} characters.
                                </small>
                                <small class="text-danger" *ngIf="updateForms.updatePersal.hasError('maxlength')">
                                    The maximum length for this field is
                                    {{updateForms.updatePersal.errors.maxlength.requiredLength}} characters.
                                </small>
                                <small class="text-danger" *ngIf=" updateForms.updatePersal.errors?.persalExist">
                                    Persal code already exist </small>
                            </div>



                        </div>
                    </div>

                </div>
                <!---persal number and GDE End Row-->
                <!---User Name And Surname Start-->


                <!--citizen row-->
                <div class="row">
                    <!---nationality filed-->
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="updateNationality">Nationality<span class="required-asterisk">*</span></label>
                            <select [(ngModel)]="updateNationality" formControlName="updateNationality"
                                name="updateNationality" (change)="getUsername('update')"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateNationality.errors}"
                                required>
                                <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let e of citizenList" [value]=e.citizenship> {{e.citizenship}}</option>

                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateNationality.errors?.required"
                                class="invalid-feedback">
                                Nationality required</p>

                        </div>

                    </div>
                    <!--ID NUMBER FIELD-->
                    <div class="col-md-6">
                        <div *ngIf="updateNationality == 'South African' || !updateNationality" class="form-group">
                            <label for="updateIdnumber" *ngIf="updateNationality">ID Number<span
                                    class="required-asterisk">*</span></label>
                            <label for="updateIdnumber" *ngIf="!updateNationality">ID/Passport Number </label>
                            <input type="text" class="form-control" formControlName="updateIdnumber"
                                (keyup)="resetupdateNationality()" [(ngModel)]="updateIdnumber" id="updateIdnumber"
                                mask="0000000000000" [hidden]="!updateNationality"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateIdnumber.errors }"
                                (change)="UserName('update')" placeholder="Type here" pattern="[0-9]{13}" ngModel
                                name="updateIdnumber" required />


                            <small class="text-danger" *ngIf=" updateForms.updateIdnumber.errors?.idNumberExist">

                                Id number already exist

                            </small>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateIdnumber.errors?.required"
                                class="invalid-feedback">ID Number required</p>
                            <!---- [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.idnumber.errors  || invalidIdNumber}" 
                     <p *ngIf="uniqueIds"  class="asterisk"> This idNumber  Exist</p>
                                [ngClass]="{'is-invalid':  createForm.idnumber.invalid &&
    
                    (createForm.idnumber.dirty || createForm.idnumber.touched)}"
             <p *ngIf="isCreateFormSubmitted && noIDNumber" class="invalid-feedback">ID
                    number required</p>
                      <p *ngIf="isCreateFormSubmitted && createForm.idnumber.errors?.required"
                     class="invalid-feedback">ID Number required</p>
                       <p *ngIf="isCreateFormSubmitted && createForm.idnumber.errors?.required"
                     class="invalid-feedback">idnumber required</p>
                <p *ngIf="createForm.idnumber.errors?.pattern || invalidIdNumber"
                    class="invalid-feedback">Invalid south african ID number</p>
                <p *ngIf="isCreateFormSubmitted && uniquPersal  && createForm.persal.errors " class="invalid-feedback"> The persal Number Exist</p>
                 ---->

                            <div *ngIf="updateForms.updateIdnumber.invalid &&
    
                            updateForms.updateIdnumber.errors &&
    
                         (updateForms.updateIdnumber.dirty || updateForms.updateIdnumber.touched)">

                                <!----   <small class="text-danger"
    
                         *ngIf="createForm.idnumber.hasError('required')">
    
                         This field is required.
    
                     </small> -->

                                <small class="text-danger" *ngIf="updateForms.updateIdnumber.hasError('minlength')">

                                    The minimum length for this field is
                                    {{updateForms.updateIdnumber.errors.minlength.requiredLength}} characters.

                                </small>

                                <small class="text-danger" *ngIf="updateForms.updateIdnumber.hasError('maxlength')">

                                    The maximum length for this field is
                                    {{updateForms.updateIdnumber.errors.maxlength.requiredLength}} characters.

                                </small>

                                <!----  <small class="text-danger"
    
                         *ngIf=" createForm.idnumber.errors?.idNumberExist">
    
                         Id number already exist
    
                     </small>---->

                                <small *ngIf="updateForms.updateIdnumber.errors?.pattern" class="text-danger">Invalid
                                    South
                                    African
                                    ID number</small>
                                <small *ngIf="invalidIdNumber" class="text-danger">Invalid south african ID
                                    number</small>

                            </div>
                        </div>

                        <!--passport filed-->

                        <div *ngIf="updateNationality == 'Non South African'" class="form-group">
                            <label for="updatePassport">Passport Number<span class="required-asterisk">*</span></label>
                            <input type="text" class="form-control" formControlName="updatePassport"
                                [(ngModel)]="updatePassport" id="updatePassport" (blur)="getUsername('update')"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updatePassport.errors }"
                                placeholder="Type here" name="updatePassport" required />
                            <p *ngIf="isEditFormSubmitted && updateForms.updatePassport.errors?.required"
                                class="invalid-feedback">passport required</p>

                            <small class="text-danger" *ngIf=" updateForms.updatePassport.errors?.passportExist">

                                Passport already exist

                            </small>

                            <div *ngIf="updateForms.updatePassport.invalid &&
    
                            updateForms.updatePassport.errors &&
    
                        (updateForms.updatePassport.dirty || updateForms.updatePassport.touched)">

                                <!----    <small class="text-danger"
    
                        *ngIf="createForm.passport.hasError('required')">
    
                        This field is required.
    
                    </small>
    
                <small class="text-danger"
    
                        *ngIf=" createForm.passport.errors?.passportExist">
    
                        Passport already exist
    
                    </small> -->

                            </div>
                            <!--passport filed End
                   [ngClass]="{'is-invalid': createForm.passport.invalid &&
                (createForm.passport.dirty || createForm.passport.touched)}" -->


                        </div>
                    </div>


                </div>
                <!---citozen row-->
                <!--gender start-->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="updateGender">Gender <span class="required-asterisk">*</span></label>
                            <select [(ngModel)]="updateGender"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateGender.errors}"
                                formControlName="updateGender" required>
                                <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let e of genderList" [value]=e.gender> {{e.gender}}</option>

                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateGender.errors?.required"
                                class="invalid-feedback">
                                Gender required</p>

                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="userName">UserName
                            </label>
                            <input class="form-control" [(ngModel)]="updateUserName" formControlName="updateUserName"
                                name="updateUserName" placeholder="" disabled>

                        </div>

                    </div>
                </div>
                <!--gender end-->

                <div class="row">
                    <!--first name filed-->
                    <div class="col-md-6">
                        <label for="updateFirstname">Name <span class="required-asterisk">*</span></label>
                        <input type="text" class="form-control" formControlName="updateFirstname"
                            [(ngModel)]="updateFirstname" minlength="3" placeholder="Type here"
                            pattern="^([A-Z][a-z]*((\\s[A-Za-z])?[a-z]*)*)$"
                            [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateFirstname.errors}"
                            required>
                        <p *ngIf="isEditFormSubmitted && updateForms.updateFirstname.errors?.required"
                            class="invalid-feedback">
                            First name required</p>
                        <p *ngIf="isEditFormSubmitted && isLenthInvalid(updateFirstname) && updateFirstname"
                            class="invalid-feedback">
                            firstname must atleast 3 Characters
                        </p>

                        <p *ngIf="isEditFormSubmitted && updateForms.updateFirstname.errors?.pattern"
                            class="invalid-feedback">
                            firstname start with Captial Letters required</p>

                    </div>
                    <!--last name filed start-->

                    <div class="col-md-6">
                        <label for="Surname">Surname <span class="required-asterisk">*</span></label>
                        <input type="text" class="form-control" formControlName="updateSurname" minlength="3"
                            [(ngModel)]="updateSurname" name="updateSurname" id="updateSurname" autocomplete="off"
                            placeholder="Type here"
                            [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateSurname.errors}"
                            required>
                        <p *ngIf="isEditFormSubmitted && updateForms.updateSurname.errors?.required"
                            class="invalid-feedback">
                            Surname required</p>
                        <!-- pattern="^([A-Z][a-z]*((\\s[A-Za-z])?[a-z]*)*)$"
                            <p class="text-danger mt-1" *ngIf="requried?.errors?.required">required error</p> -->
                        <p *ngIf="isEditFormSubmitted && isLenthInvalid(updateSurname) && updateSurname"
                            class="invalid-feedback">
                            Surname must atleast 3 Characters
                        </p>

                        <p *ngIf="isEditFormSubmitted && updateForms.updateSurname.errors?.pattern"
                            class="invalid-feedback">
                            Surname start with Captial Letters required</p>
                    </div>
                    <!--end of Last Name-->
                </div>
                <!--User Name And Surname End-->
                <br>
                <!--office Level infomatiom-->
                <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;">
                    <div class="col-md-12">
                        <h6><B>Office Level Information</B></h6>
                    </div>
                </div>

                <!---office level drop down-->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="updateOfficelevel">Office Level <span class="required-asterisk">*</span></label>

                            <select [(ngModel)]="updateOfficelevel" formControlName="updateOfficelevel"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateOfficelevel.errors}"
                                formControlName="updateOfficelevel" class="form-control"
                                (click)="setValidationFlag(true)" (change)="onChangeOffice(updateOfficelevel)"
                                (change)="validateRoleId(updateRoletype)" required *ngIf="isAdmin">
                                <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let e of OfficeLevelList" [hidden]="isLevelInvalid(e.officeLevel)"
                                    [value]=e.officeLevel> {{e.officeLevel}}
                                </option>
                            </select>
                            <input *ngIf="!isAdmin" class="form-control" value="{{updateOfficelevel}}" readonly>

                            <p *ngIf="isEditFormSubmitted && updateForms.updateOfficelevel.errors?.required"
                                class="invalid-feedback">Office level required</p>
                        </div>


                    </div>

                    <!-- <div *ngIf="updateOfficelevel == 'District' && isAdmin || updateOfficelevel == 'Head Office' && loggedInRole != 'System Administrator' && isAdmin"
                        class="col-md-3 inline-radio">
                        <div class="form-check form-check-flat form-check-primary">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" (click)="setValidationFlag(true)"
                                    [(ngModel)]="updateRoletype" formControlName="updateRoletype" value="admin"
                                    (change)="validateRoleId('admin')">
                                <i class="input-frame"></i>
                                System Administrator<span class="required-asterisk">*</span>
                            </label>
                        </div>
                    </div> -->
                    <!-- NON GDE filed start-->
                    <!-- <div *ngIf="updateOfficelevel == 'District'|| updateOfficelevel == 'Head Office'"
                        class="col-md-3 inline-radio">
                        <div class="form-check form-check-flat form-check-primary">
                            <label class="form-check-label">
                                <input type="radio" class="form-check-input" [(ngModel)]="updateRoletype"
                                    formControlName="updateRoletype" value="otherRole" (click)="setValidationFlag(true)"
                                    (change)="validateRoleId('otherRole')">
                                <i class="input-frame"></i>
                                Other Roles<span class="required-asterisk">*</span>
                            </label>
                            
                        </div>
                    </div> -->
                    <!---radio -->
                </div>
                <!---office level drop down-->
                <!--admini checkbox and Other roles-->
                <!--admini checkbox--
    <div class="row">
        <div *ngIf="position =='System Administrator'|| officelevel == 'Head Office' || officelevel == 'District'"
       class="col-md-6">
        <div class="form-check form-check-flat form-check-primary">
            <label class="form-check-label">
                <input type="checkbox" class="form-check-input"  [checked]="checkbox" (click)="selectAdmin(admin)"
                    [(ngModel)]="admin" formControlName="admin">
                <i class="input-frame"></i>
                System Administrator
           
            </label>
        </div>
    </div>
    
    <div *ngIf="officelevel == 'Head Office' ||  officelevel == 'District'"
    class="col-md-6">
     <div class="form-check form-check-flat form-check-primary">
         <label class="form-check-label">
             <input type="checkbox" class="form-check-input"  [checked]="checkbox" (change)="selectOther($event)"
                 [(ngModel)]="other" formControlName="other">
             <i class="input-frame"></i>
             Other Roles
        
         </label>
     </div>
    </div>
    </div> -->



                <!--district info under System Admini-->
                <div class="row">

                    <div *ngIf="updateRoletype == 'admin' && updateOfficelevel == 'District' " class="col-md-6">
                        <div class="form-group">
                            <label for="updateRegion">Region <span class="required-asterisk">*</span></label>
                            <select [(ngModel)]="updateRegion" formControlName="updateRegion" name="updateRegion"
                                (change)="onupdateSelectedregion(updateRegion)" (click)="setValidationFlag(true)"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateRegion.errors}"
                                required>

                                <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let reg of regionsData" value="{{reg}}">{{reg}}</option>
                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateRegion.errors?.required"
                                class="invalid-feedback">
                                Region required</p>


                        </div>
                    </div>
                    <!----re-->
                    <div *ngIf="updateRoletype == 'admin' && updateOfficelevel == 'District' " class="col-md-6">
                        <div class="form-group">
                            <label for="updateDistrictName">District<span class="required-asterisk">*</span></label>
                            <select [(ngModel)]="updateDistrictName"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateDistrictName.errors}"
                                formControlName="updateDistrictName" name="updateDistrictName" required>
                                <!-- <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let dis of districtsData" [value]="dis">{{dis | titlecase}}</option> -->
                                <option value="" hidden disabled selected>Please select</option>
                                <option value="" [hidden]="updateRegion" disabled>Please select region</option>
                                <option *ngFor="let dis of districtsData" [hidden]="!updateRegion" [value]="dis">{{dis |
                                    titlecase}}</option>

                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateDistrictName.errors?.required"
                                class="invalid-feedback">District required</p>

                        </div>

                    </div>



                </div>
                <!---position filed fo admini both Head and District-->
                <div class="row">
                    <div *ngIf="updateRoletype == 'admin' && updateOfficelevel == 'District' || updateRoletype == 'admin' && updateOfficelevel == 'Head Office' "
                        class="col-md-6">
                        <div class="form-group">
                            <label for="updatePosition">Position <span class="required-asterisk">*</span></label>
                            <input class="form-control" value="System Administrator" name="updatePosition" disabled>

                            <!-- <p *ngIf="isEditFormSubmitted && updateForms.updatePosition.errors?.required"
                                class="invalid-feedback"> required</p> -->
                        </div>
                    </div>
                </div>

                <!---head office fileld for other user-->

                <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='Head Office' " class="row">
                    <div style="margin-bottom: 1rem; margin-top: 1rem;" class="row" class="col-md-12">

                        <h6>Head Office Information</h6>
                    </div>
                    <!--branch Head Office-->
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="updateBranch">Branch <span class="required-asterisk">*</span> </label>
                            <select (change)="selectBranch(updateBranch,'update')" [(ngModel)]="updateBranch"
                                formControlName="updateBranch" name="updateBranch" (click)="setValidationFlag(true)"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateBranch.errors}"
                                required *ngIf="isAdmin">
                                <option value="" hidden disabled selected>Please select</option>
                                <!-- <option *ngFor="let branch of allBranches; let i = index"
                                    (click)="setId(branch, 'branch')" value="{{branch.branchName}}">
                                    {{branch.branchName}}
                                </option> -->
                                <option *ngFor="let branch of allBranches"
                                    value="{{branch.branchId}}#;{{branch.branchName}}#;{{branch.id}}">
                                    {{branch.branchName}}
                                </option>
                                <!-- <option *ngFor="let c of Branches" [ngValue]="c">{{c}}</option> -->

                            </select>
                            <input *ngIf="!isAdmin" class="form-control" value="{{updateBranch}}" readonly>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateBranch.errors?.required"
                                class="invalid-feedback">
                                Branch Required</p>
                        </div>
                    </div>
                    <!---chied directorate -->
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="updateChiefDirectorate">Chief Directorate <span
                                    class="required-asterisk">*</span></label>
                            <select [(ngModel)]="updateChiefDirectorate" formControlName="updateChiefDirectorate"
                                name="updateChiefDirectorate" (change)="selectChiefDirectorate(updateChiefDirectorate)"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateChiefDirectorate.errors}"
                                required *ngIf="isAdmin">
                                <option value="" hidden selected disabled>Please select</option>
                                <!-- <option *ngFor="let c of BranchCD" [hidden]="!c" [ngValue]="c">{{c}}
                                </option> -->
                                <option *ngFor="let chief of chiefDirectorates"
                                    value="{{chief.id}}#;{{chief.chiefDirectorateName}}">
                                    {{chief.chiefDirectorateName}}
                                </option>

                            </select>
                            <input *ngIf="!isAdmin" class="form-control" value="{{updateChiefDirectorate}}" readonly>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateChiefDirectorate.errors?.required"
                                class="invalid-feedback">Chief Directorate Required</p>

                        </div>
                    </div>
                    <!----directorate-->
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="updateDirectorate">Directorate <span class="required-asterisk">*</span>
                            </label>
                            <select class="form-control" [(ngModel)]="updateDirectorate"
                                formControlName="updateDirectorate" name="updateDirectorate"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateDirectorate.errors}"
                                required *ngIf="isAdmin" (change)="selectUpdateDirectorate(updateDirectorate)">
                                <option value="" hidden selected disabled>Please select</option>
                                <!-- <option *ngFor="let c of HODData" [hidden]="!c" [ngValue]="c">{{c}}</option> -->
                                <option *ngFor="let dir of directorates" value="{{dir.id}}#;{{dir.directorateName}}">
                                    {{dir.directorateName}}
                                </option>
                            </select>
                            <input *ngIf="!isAdmin" class="form-control" value="{{updateDirectorate}}" readonly>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateDirectorate.errors?.required"
                                class="invalid-feedback"> Directorate Required</p>
                        </div>
                    </div>
                    <!--sub directorate-->

                    <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='Head Office'" class="col-md-6">
                        <div class="form-group">
                            <label for="updateSubDirectorate">Sub-Directorate <span
                                    class="required-asterisk">*</span></label>
                            <select class="form-control" [(ngModel)]="updateSubDirectorate"
                                formControlName="updateSubDirectorate" name="updateSubDirectorate"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateSubDirectorate.errors}"
                                required>
                                <option value="" hidden selected disabled>Please select</option>
                                <!-- <option *ngFor="let c of HOSDData" [hidden]="!c" [ngValue]="c">{{c}}
                                </option> -->
                                <option *ngFor="let sub of subDirectorates"
                                    value="{{sub.id}}#;{{sub.subDirectorateName}}">
                                    {{sub.subDirectorateName}}
                                </option>
                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateSubDirectorate.errors?.required"
                                class="invalid-feedback">Sub-Directorate Required</p>
                        </div>
                    </div>
                    <!--position-->
                    <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='Head Office'" class="col-md-6">

                        <div class="form-group">
                            <label for="updatePosition">Position <span class="required-asterisk">*</span></label>
                            <select class="form-control" [(ngModel)]="updatePosition" formControlName="updatePosition"
                                name="updatePosition"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updatePosition.errors}"
                                required>

                                <option value="" hidden disabled selected>Please select</option>
                                <!-- <option *ngFor="let c of HOPOsition" value="{{c}}">{{c}}</option> -->
                                <option *ngFor="let position of positionList"
                                    [hidden]="!updateBranch || isFromBranch(position.id, updateBranch)"
                                    value="{{position.position}}">
                                    {{position.position}}
                                </option>
                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updatePosition.errors?.required"
                                class="invalid-feedback">Position required</p>
                        </div>
                    </div>

                </div>


                <!--end of head office user--->
                <!---district information office level-->
                <!----->

                <div class="row">

                    <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='District' "
                        style="margin-bottom: 1rem; margin-top: 1rem;" class="row" class="col-md-12">

                        <h6>District Information</h6>
                    </div>

                    <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='District' " class="col-md-6">
                        <div class="form-group">
                            <label for="updateRegion">Region <span class="required-asterisk">*</span></label>
                            <select [(ngModel)]="updateRegion" formControlName="updateRegion" name="updateRegion"
                                (change)="onupdateSelectedregion(updateRegion)" (click)="setValidationFlag(true)"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateRegion.errors}"
                                required *ngIf="isAdmin">

                                <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let reg of regionsData" value="{{reg}}">{{reg}}</option>
                            </select>
                            <input *ngIf="!isAdmin" class="form-control" value="{{updateRegion}}" readonly>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateRegion.errors?.required"
                                class="invalid-feedback">
                                Region Required</p>


                        </div>
                    </div>

                    <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='District' " class="col-md-6">
                        <div class="form-group">
                            <label for="updateDistrictName">District<span class="required-asterisk">*</span></label>
                            <select [(ngModel)]="updateDistrictName"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateDistrictName.errors}"
                                formControlName="updateDistrictName" name="updateDistrictName" *ngIf="isAdmin" required>
                                <!-- <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let dis of districtsData" [value]="dis">{{dis | titlecase}}</option> -->
                                <option value="" hidden disabled selected>Please select</option>
                                <option value="" [hidden]="updateRegion" disabled>Please select region</option>
                                <option *ngFor="let dis of districtsData" [hidden]="!updateRegion" [value]="dis">{{dis |
                                    titlecase}}</option>
                            </select>
                            <input *ngIf="!isAdmin" class="form-control" value="{{updateDistrictName | titlecase}}"
                                readonly>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateDistrictName.errors?.required"
                                class="invalid-feedback">District required</p>

                        </div>

                    </div>
                    <!-- <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='District' " class="col-md-6">
                        <div class="form-group">
                            <label for="updateDirectorate">Directorate </label>

                            <select class="form-control" formControlName="updateDirectorate"
                                [(ngModel)]="updateDirectorate" name="updateDirectorate"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateDirectorate.errors}"
                                required>
                                <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let c of dispositiondatadir" value="{{c}}">{{c}}</option>
                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateDirectorate.errors?.required"
                                class="invalid-feedback">Directorate required</p>
                        </div>
                    </div> -->
                    <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='District' " class="col-md-6">
                        <div class="form-group">
                            <label for="updateSubDirectorate">Sub-Directorate <span
                                    class="required-asterisk">*</span></label>
                            <select (change)="updateSubdirectorate(updateSubDirectorate)"
                                formControlName="updateSubDirectorate" [(ngModel)]="updateSubDirectorate"
                                name="updateSubDirectorate" (click)="setValidationFlag(true)"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateSubDirectorate.errors}"
                                required>
                                <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let c of dispositionsdatasub" value="{{c}}">{{c}}</option>
                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateSubDirectorate.errors?.required"
                                class="invalid-feedback">Sub-Directorate Required</p>
                        </div>
                    </div>
                    <div *ngIf="updateRoletype == 'otherRole' && updateOfficelevel =='District' " class="col-md-6">
                        <div class="form-group">
                            <label for="updatePosition">Position <span class="required-asterisk">*</span>
                            </label>
                            <select [(ngModel)]="updatePosition" formControlName="updatePosition" name="updatePosition"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updatePosition.errors}"
                                (change)="updateposition(updatePosition)" (click)="setValidationFlag(true)" required>
                                <option value="" hidden disabled selected>Please select</option>
                                <option *ngFor="let c of dispositionsdataposition" value="{{c}}">{{c}}
                                </option>

                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updatePosition.errors?.required"
                                class="invalid-feedback">Position required</p>
                        </div>

                    </div>

                </div>
                <!---END OF District office-->


                <!----School Office level-->
                <div class="row">
                    <div *ngIf="updateOfficelevel =='School'" style="margin-bottom: 1rem; margin-top: 1rem;" class="row"
                        class="col-md-12">

                        <h6>School Information</h6>
                    </div>

                    <div *ngIf="updateOfficelevel =='School' && updateSelectedSchool" class="col-md-6">
                        <div class="form-group" readonly>
                            <label for="updateRegion">Region</label>
                            <input class="form-control" [(ngModel)]="updateRegion" formControlName="updateRegion"
                                disabled name="updateRegion">



                        </div>
                    </div>

                    <div *ngIf="updateOfficelevel =='School' && updateSelectedSchool" class="col-md-6">
                        <div class="form-group">
                            <label for="updateDistrictName">District</label>


                            <input class="form-control" [(ngModel)]="updateDistrictName"
                                formControlName="updateDistrictName" disabled name="updateDistrictName">

                            <p *ngIf="isEditFormSubmitted && updateForms.updateDistrictName.errors?.required"
                                class="invalid-feedback">District Name required</p>

                        </div>

                    </div>

                    <div class="col-md-6">
                        <!--done validation-->
                        <div *ngIf="updateOfficelevel =='School'" class="form-group">
                            <label for="updateSelectedSchool">School<span class="required-asterisk">*</span></label>
                            <ng-select [items]="schoolsMain" bindLabel="institutionName" bindValue="institutionName"
                                [(ngModel)]="updateSelectedSchool" formControlName="updateSelectedSchool"
                                [searchable]="true" placeholder="Please select" (click)="setValidationFlag(true)"
                                [multiple]=false
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateSelectedSchool.errors}"
                                (change)="onupdateschoolchanges(updateSelectedSchool)" [closeOnSelect]="true" required>
                            </ng-select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateSelectedSchool.errors?.required"
                                class="invalid-feedback">School required</p>

                        </div>
                    </div>
                    <div *ngIf="updateOfficelevel =='School'" class="col-md-6">
                        <div class="form-group">
                            <label for="updatePosition">Position <span class="required-asterisk">*</span></label>

                            <select [(ngModel)]="updatePosition" formControlName="updatePosition" name="updatePosition"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updatePosition.errors}"
                                required>
                                <option value="" hidden disabled selected>Please select</option>

                                <option *ngFor="let e of schoolPositionList" [value]=e.schoolPosition>
                                    {{e.schoolPosition}}
                                </option>
                                <!--<option value="ADMIN">ADMIN</option>-->
                            </select>
                            <p *ngIf="isEditFormSubmitted && updateForms.updatePosition.errors?.required"
                                class="invalid-feedback">SchoolPosition required</p>

                        </div>

                    </div>

                </div>

                <!--contact details-->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="updateCellNumber">Contact Number
                                <span class="required-asterisk">*</span>
                            </label>
                            <input class="form-control" formControlName="updateCellNumber"
                                [(ngModel)]="updateCellNumber" id="updateCellNumber" mask="000 000 0000"
                                placeholder="Type here" minlength="0" maxlength="12"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateCellNumber.errors }"
                                required>
                            <!---- <p *ngIf="isCreateFormSubmitted && createForm.cellNumber.errors?.required"
                    class="invalid-feedback">Contact number required</p>
                <p *ngIf="isCreateFormSubmitted && isNumberInvalid && !isCellnumberDuplicate && !createForm.cellNumber.errors?.required || isCreateFormSubmitted && !isCellnumberDuplicate && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                    class="invalid-feedback">Invalid contact number</p>
                <p *ngIf="uniqueCellNumber" class="asterisk" > This Contact number Exist
                   </p>
                    
                <p *ngIf="isCreateFormSubmitted && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                    class="invalid-feedback">Contact number must have 10 digits</p> -
                    <p *ngIf="isCreateFormSubmitted && createForm.cellNumber.errors?.required"
                    class="invalid-feedback">Contact number required</p>---->
                            <p *ngIf="isEditFormSubmitted && updateForms.updateCellNumber.errors?.required"
                                class="invalid-feedback">Contact number required</p>
                            <p *ngIf="isEditFormSubmitted && !updateForms.updateCellNumber.errors?.maxlength "
                                class="invalid-feedback">Invalid Contact number must have 10 digits</p>

                            <div *ngIf="updateForms.updateCellNumber.invalid &&
                            updateForms.updateCellNumber.errors &&
                            (updateForms.updateCellNumber.dirty || updateForms.updateCellNumber.touched)">

                                <!----  <small class="text-danger"
    
                            *ngIf="createForm.cellNumber.hasError('required')">
    
                            This field is required.
    
                        </small> -->

                                <small class="text-danger" *ngIf="updateForms.updateCellNumber.hasError('minlength')">

                                    The minimum length for this field is
                                    {{updateForms.cellNumber.errors.minlength.requiredLength}} characters.

                                </small>

                                <small class="text-danger" *ngIf="updateForms.updateCellNumber.hasError('maxlength')">

                                    The maximum length for this field is
                                    {{updateForms.cellNumber.errors.maxlength.requiredLength}} characters.

                                </small>

                                <small class="text-danger" *ngIf="updateForms.updateCellNumber.errors?.cellExist">

                                    Cell number already exist

                                </small>

                            </div>


                        </div>
                    </div>
                    <!--email details-->
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="updateEmailAddress">Email Address
                                <span class="required-asterisk">*</span>
                            </label>
                            <input type="email" class="form-control" formControlName="updateEmailAddress"
                                [(ngModel)]="updateEmailAddress" id="updateEmailAddress" placeholder="Type here"
                                inputmode="email" pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                                [ngClass]="{'is-invalid': isEditFormSubmitted && updateForms.updateEmailAddress.errors}"
                                required>
                            <!----<p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.required"
                    class="invalid-feedback">Email address required</p>
                    <p *ngIf="uniqueMailAdress" class="asterisk">This Email address Exist</p>
                <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.pattern"
                    class="invalid-feedback">Invalid email address</p>---->
                            <p *ngIf="isEditFormSubmitted && updateForms.updateEmailAddress.errors?.required"
                                class="invalid-feedback">Email address required</p>
                            <p *ngIf="isEditFormSubmitted && updateForms.updateEmailAddress.errors?.pattern"
                                class="invalid-feedback">Invalid Email address</p>
                            <div *ngIf="updateForms.updateEmailAddress.invalid &&
    
                            updateForms.updateEmailAddress.errors &&
    
                            (updateForms.updateEmailAddress.dirty || updateForms.updateEmailAddress.touched)">

                                <!---  <small class="text-danger"
    
                            *ngIf="createForm.emailAddress.hasError('required')">
    
                            This field is required.
    
                        </small> -->

                                <small class="text-danger" *ngIf="updateForms.updateEmailAddress.errors?.emailExist">

                                    Email address already exist

                                </small>

                                <!---- <span class="text-danger
    
                        *ngIf="createForm.emailAddress.errors?.email">
    
                        Enter a valid email address
    
                    </span>-->

                            </div>
                        </div>
                    </div>
                    <!--email details-->
                </div>


            </form>
        </div>

        <div class="card-footer">

            <div class="row float-right">
                <button type="button" (click)="updateUserInfo()" class="btn btn-primary mr-2"
                    [disabled]="isLoading"><span class="spinner-border spinner-border-sm" role="status"
                        aria-hidden="true" *ngIf="isLoading"></span>Submit</button>
                <button type="button" class="btn btn-warning" (click)="modal.close('by: close icon')"
                    [disabled]="isLoading"><span class="spinner-border spinner-border-sm" role="status"
                        aria-hidden="true" *ngIf="isLoading"></span>Cancel</button>
                <!---End of submit button-->
            </div>
        </div>
    </div>

</ng-template>
<!--end end of new update modal edit-->
<!--editmodel-->















<ng-template #lgModalEditdeactive let-modal>

    <div class="modal-header bg-primary text-white headingStyle2">
        <h4 class="modal-title text-white" id="exampleModalLabel">Edit User</h4>
        <button type="button" class="close text-white" (click)="modal.close('by: close icon')" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-12 stretch-card">
                <div class="card">
                    <div class="card">
                        <div class="card-header">
                            Edit User
                        </div>
                        <form (ngSubmit)="Editactiveuser()" [formGroup]="validationFormActiveEdit">
                            <div class="card-body">




                                <div class="row">

                                    <div class="col-sm-6">
                                        <!-- Col -->
                                        <div class="form-group">
                                            <label class="control-label">Status</label>
                                            <select [(ngModel)]="editStatus"
                                                [ngClass]="{'is-invalid': isCreateFormSubmitted && editactivForm.editStatus.errors}"
                                                formControlName="editStatus" required>
                                                <option>Active</option>
                                                <option>In-Active</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-sm-6">
                                        <!-- Col -->
                                        <div class="form-group">
                                            <label class="control-label">Status</label>
                                            <select [(ngModel)]="editStatus"
                                                [ngClass]="{'is-invalid': isCreateFormSubmitted && editactivForm.editStatus.errors}"
                                                formControlName="editStatus" required>
                                                <option>Active</option>
                                                <option>In-Active</option>
                                            </select>
                                        </div>
                                    </div>







                                </div>



























                                <button type="submit" class="btn btn-primary mr-2">Submit</button>


                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>
<!--edit ends-->

<!-- Modal -->
<ng-template #basicModal let-modal>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Select Appointment Letter Type</h5>
        <button type="button" class="close" (click)="modal.close('by: close icon')" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <h6>Upload the(<span class="text-warning">{{this.docuTypeRole}}</span>)appointment letter</h6>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" #closeAddExpenseModal
            (click)="modal.close('by: close button')">Close</button>
        <button type="button" class="btn btn-primary" (click)="modal.close('by: close button')"
            (click)="onUpload()">Save changes</button>
    </div>
</ng-template>













































<!---edit model Nompumelelo-->

<ng-template #lgModalEdit let-modal>


    <div class="modal-header bg-primary text-white headingStyle2">
        <h4 class="modal-title text-white" id="exampleModalLabel">Edit User</h4>
        <button type="button" class="close text-white" (click)="modal.close('by: close icon')" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-12 stretch-card">
                <div class="card">
                    <div class="card">
                        <div class="card-header">
                            Edit User
                        </div>
                        <form (ngSubmit)="updateUser()" [formGroup]="validationFormEdit">
                            <div class="card-body">
                                <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;">
                                    <div class="col-md-12">
                                        <h4>Personal Information</h4>

                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editName">Name</label>
                                            <input type="text" class="form-control" formControlName="editName"
                                                [(ngModel)]="editName" name="editName" id="editName" autocomplete="off"
                                                placeholder="Type here"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editName.errors}"
                                                required>
                                            <p class="invalid-feedback">First name required</p>

                                        </div>
                                        <!---//srikant *ngIf="isEditFormSubmitted && editForm.editName.errors?.required"//-->
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editSurname">Surname</label>
                                            <input type="text" class="form-control" formControlName="editSurname"
                                                [(ngModel)]="editSurname" name="editSurname" id="editSurname"
                                                autocomplete="off" placeholder="Type here"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editSurname.errors}"
                                                required>
                                            <p *ngIf="isEditFormSubmitted && editForm.editSurname.errors?.required"
                                                class="invalid-feedback">Surname required</p>

                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="officelevel">Office Level</label>

                                        <select [(ngModel)]="editofficelevel" formControlName="editofficelevel"
                                            name="editofficelevel" class="form-control"
                                            (change)="onChangeOffice(editofficelevel)"
                                            [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editofficelevel.errors}">

                                            <option value="" hidden disabled selected>Please select</option>
                                            <option value="Head Office">Head Office</option>
                                            <option value="District">District</option>
                                            <option value="School">School
                                            <option>

                                        </select>
                                        <p *ngIf="isEditFormSubmitted && editForm.editofficelevel.errors?.required"
                                            class="invalid-feedback">editofficelevel required</p>



                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <!-- Col -->
                                        <div class="form-group">
                                            <label for="editStatus">Status</label>
                                            <select [(ngModel)]="editStatus" class="form-control"
                                                formControlName="editStatus" id="editStatus" name="editStatus">
                                                <option>Active</option>
                                                <option>In-Active</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>





                                <div *ngIf="ShowSchoolinfo == true" class="col-sm-6">
                                    <div class="form-group">
                                        <label class="control-label">School Position </label>

                                        <ng-select [items]="roles" bindLabel="role" bindValue="role"
                                            formControlName="roleSelected">
                                        </ng-select>

                                    </div>
                                </div>
                                <div class="row">
                                    <div *ngIf="loggedInRole != 'PRINCIPAL' && loggedInRole != 'SEO' && loggedInRole != 'SGB' "
                                        class="col-md-6">
                                        <div class="form-check form-check-flat form-check-primary">
                                            <label class="form-check-label">
                                                <input type="checkbox" formControlName="editIsEmployee"
                                                    (change)="validateEditIDnumber()" [(ngModel)]="editIsEmployee"
                                                    class="form-check-input">
                                                <i class="input-frame"></i>
                                                <h4><br>GDE Employee</h4>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editGender">Gender</label>
                                            <select [(ngModel)]="editGender" formControlName="editGender"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editGender.errors}">
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                            </select>
                                            <p *ngIf="isEditFormSubmitted && editForm.editGender.errors?.required"
                                                class="invalid-feedback">Gender required</p>

                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editNationality">Nationality</label>
                                            <input type="text" class="form-control" [(ngModel)]="editNationality"
                                                id="editNationality" formControlName="editNationality" readonly />
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div *ngIf="editNationality == 'South African'" class="form-group">
                                            <label for="editIdNumber">ID Number</label>
                                            <input type="text" class="form-control" [(ngModel)]="editIdNumber"
                                                id="editIdNumber" formControlName="editIdNumber" placeholder="Type here"
                                                name="editIdNumber" pattern="[0-9*]{13}" minlength="0" maxlength="13"
                                                (keyup)="validateEditIDnumber()"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editIdNumber.errors || emptyEditUsernumber || invalidEditIdNumber}" />
                                            <p *ngIf="isEditFormSubmitted && noEditIDnumber && editNationality == 'South African'"
                                                class="invalid-feedback">ID number required</p>
                                            <p *ngIf="isEditFormSubmitted && editForm.editIdNumber.errors?.pattern && editNationality == 'South African' || editNationality == 'South African' && invalidEditIdNumber"
                                                class="invalid-feedback">Invalid ID number</p>
                                        </div>
                                        <div *ngIf="editNationality == 'Non South African'" class="form-group">
                                            <label for="editPassport">Passport Number</label>
                                            <input type="text" class="form-control" formControlName="editPassport"
                                                [(ngModel)]="editPassport" id="editPassport" pattern="[a-zA-Z0-9]*"
                                                (keyup)="validateIDnumber()"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editPassport.errors || isEditFormSubmitted && !editPassport && editNationality == 'Non South African' && !editPersal}"
                                                placeholder="Type here" name="editPassport" />
                                            <!-- <p *ngIf="isCreateFormSubmitted && createForm.passport.errors?.pattern"
                                                class="invalid-feedback">Invalid
                                                passport number</p> -->
                                            <!-- || editNationality == 'Non South African' && invalidEditIdNumber -->
                                            <p *ngIf="isEditFormSubmitted && !editPassport && editNationality == 'Non South African' && !editPersal && !editIsEmployee"
                                                class="invalid-feedback">Passport number required</p>
                                            <p *ngIf="isEditFormSubmitted && editForm.editIdNumber.errors?.pattern && editNationality == 'Non South African' "
                                                class="invalid-feedback">Invalid passport number</p>

                                        </div>
                                    </div>

                                </div>
                                <div class="row" *ngIf="editIsEmployee">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editPersal">Persal Number</label>
                                            <input type="text" class="form-control" [(ngModel)]="editPersal"
                                                (keyup)="validateEditIDnumber()" mask="00000000" maxlength="8"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editPersal.errors || isEditFormSubmitted && emptyEditUsernumber}"
                                                id="editPersal" formControlName="editPersal" placeholder="Type here"
                                                name="editPersal" />
                                            <!-- [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editPersal.errors}" /> -->

                                            <p *ngIf="isEditFormSubmitted && emptyEditUsernumber"
                                                class="invalid-feedback">Please provide the user's ID number or persal
                                                number
                                            </p>
                                            <p *ngIf="isEditFormSubmitted && !editForm.editPersal.errors?.maxlength  && !emptyEditUsernumber"
                                                class="invalid-feedback">Persal number must have 8 digits
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;">
                                    <div class="col-md-12">
                                        <h6>Account Information</h6>
                                    </div>
                                </div>
                                <div class="row">
                                    <!-- <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="edituserType">User Role</label>
                                            <input type="text" readonly name="edituserType" class="form-control"
                                                formControlName="edituserType" [(ngModel)]="edituserType"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.edituserType.errors}">
                                            <p *ngIf="isEditFormSubmitted && editForm.edituserType.errors?.required"
                                                class="invalid-feedback">User role required</p>
                                        </div>
                                    </div> -->



                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label class="control-label">User Roles</label>
                                            <ng-select [items]="roles" [multiple]=true [closeOnSelect]="false"
                                                [searchable]="true" bindLabel="role" placeholder="Please select"
                                                [(ngModel)]="editRoleSelected" formControlName="editRoleSelected"
                                                required (change)="validateEditDistrict()"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editRoleSelected.errors}">
                                            </ng-select>
                                            <p *ngIf="isEditFormSubmitted && editForm.editRoleSelected.errors?.required"
                                                class="invalid-feedback">
                                                User role required</p>
                                        </div>


                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editDesignation">Designation</label>
                                            <select formControlName="editDesignation" [(ngModel)]="editDesignation">
                                                <option value="" hidden disabled selected>Please select</option>
                                                <option *ngFor="let designation of designations"
                                                    value="{{designation.description}}">
                                                    {{designation.description}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;">
                                    <div class="col-md-12">
                                        <h6>Address Informationtest</h6>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check form-check-flat form-check-primary">
                                            <label class="form-check-label">
                                                <input type="checkbox" class="form-check-input"
                                                    [(ngModel)]="editinformalsettlement "
                                                    formControlName="editinformalsettlement">
                                                <i class="input-frame"></i>
                                                Informal Settlement
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editHouse">House/Stand/Erf Number</label>
                                            <input type="text" class="form-control" formControlName="editHouse"
                                                [(ngModel)]="editHouse" id="editHouse" placeholder="Type here">
                                            <!-- <p class="text-danger mt-1" *ngIf="requried?.errors?.required">required error</p> -->
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editComplex">Complex Name & Unit No.</label>
                                            <input type="text" class="form-control" formControlName="editComplex"
                                                [(ngModel)]="editComplex" id="editComplex" placeholder="Type here">
                                            <!-- <p class="text-danger mt-1" *ngIf="requried?.errors?.required">required error</p> -->
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editStreet">Street Name</label>
                                            <input type="text" class="form-control" formControlName="editStreet"
                                                [(ngModel)]="editStreet" id="editStreet" placeholder="Type here">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editSection">Section</label>
                                            <input type="text" class="form-control" formControlName="editSection"
                                                [(ngModel)]="editSection" id="editSection" placeholder="Type here">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editCity">City</label>
                                            <input type="text" class="form-control" formControlName="editCity"
                                                [(ngModel)]="editCity" id="editCity" placeholder="Type here">
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;">
                                    <div class="col-md-12">
                                        <h6>Contact Information</h6>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editCellNumber">Contact Number</label>
                                            <input type="text" class="form-control" formControlName="editCellNumber"
                                                [(ngModel)]="editCellNumber" id="editCellNumber" minlength="0"
                                                maxlength="12" mask="000 000 0000" (keyup)="editfieldChange()"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editCellNumber.errors || iseditNumberInvalid && isEditFormSubmitted || iseditCellnumberDuplicate}"
                                                placeholder="Type here">
                                            <p *ngIf="isEditFormSubmitted && editForm.editCellNumber.errors?.required"
                                                class="invalid-feedback">Contact number required</p>
                                            <p *ngIf="isEditFormSubmitted && iseditNumberInvalid && !iseditCellnumberDuplicate && !editForm.editCellNumber.errors?.required || isEditFormSubmitted && !iseditCellnumberDuplicate && !editForm.editCellNumber.errors?.maxlength && !editForm.editCellNumber.errors?.required"
                                                class="invalid-feedback">Invalid contact number</p>
                                            <p *ngIf="iseditCellnumberDuplicate" class="invalid-feedback">Contact number
                                                already registered, please try another one</p>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editEmail">Email Address</label>
                                            <input type="email" class="form-control" formControlName="editEmail"
                                                [(ngModel)]="editEmail" id="editEmail" autocomplete="off"
                                                placeholder="Type here" inputmode="email"
                                                pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editEmail.errors}">
                                            <p *ngIf="isEditFormSubmitted && editForm.editEmail.errors?.required"
                                                class="invalid-feedback">Email address required</p>
                                            <p *ngIf="isEditFormSubmitted && editForm.editEmail.errors?.pattern"
                                                class="invalid-feedback">Invalid email address</p>
                                        </div>
                                    </div>
                                </div>


                                <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;"
                                    *ngIf="showHide('districtupdate')">
                                    <div class="col-md-12">
                                        <h6>School Information</h6>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;"
                                    *ngIf="showHide('seoupdate')">
                                    <div class="col-md-12">
                                        <p class="text-center text-info"><i class="mdi mdi-information-outline"></i>The
                                            school selected below will be primarily assigned to {{editName}}
                                            {{editSurname}}</p>
                                    </div>
                                </div>

                                <div class="row" *ngIf="showHide('districtupdate')">

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="districtName">District</label>
                                            <input type="text" readonly [(ngModel)]="districtName"
                                                formControlName="editDistrictCode" class="form-control"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editDistrictCode.errors}">
                                            <p *ngIf="isEditFormSubmitted && editForm.editDistrictCode.errors?.required"
                                                class="invalid-feedback">District required</p>
                                        </div>
                                    </div>
                                    <div class="col-md-6" *ngIf="showHide('schoolupdate')">
                                        <div class="form-group">
                                            <label for="editEmisNumber">School Name</label>
                                            <input type="text" readonly [(ngModel)]="schoolName"
                                                formControlName="editEmisNumber" class="form-control"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editEmisNumber.errors}">
                                            <p *ngIf="isEditFormSubmitted && editForm.editEmisNumber.errors?.required"
                                                class="invalid-feedback">School required</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;"
                                    *ngIf="showHide('seoupdate')">
                                    <div class="col-md-12">
                                        <p class="text-center text-info"><i class="mdi mdi-information-outline"></i>The
                                            school selected below will be assigned to {{editName}} {{editSurname}} as a
                                            School Electoral Officer</p>
                                    </div>
                                </div>
                                <div class="row" *ngIf="showHide('seoupdate')">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="editSeoEmisNumber">School Name</label>
                                            <select [(ngModel)]="editSeoEmisNumber" formControlName="editSeoEmisNumber"
                                                (change)="getSchoolName(editSeoEmisNumber, true)"
                                                [ngClass]="{'is-invalid': isEditFormSubmitted && editForm.editSeoEmisNumber.errors}">
                                                <option value="" hidden disabled selected>Please select</option>
                                                <option [hidden]="editDistrictCode" value="-1" disabled>Please select
                                                    district first</option>
                                                <option *ngFor="let seoSchool of seoSchools"
                                                    value={{seoSchool.emisCode}}>
                                                    {{seoSchool.institutionName}}</option>
                                            </select>
                                            <p *ngIf="isEditFormSubmitted && editForm.editSeoEmisNumber.errors?.required"
                                                class="invalid-feedback">School required</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" *ngIf="showHide('blacklist')">
                                    <div class="col-md-6">
                                        <div class="form-check form-check-flat form-check-primary">
                                            <label class="form-check-label">
                                                Is Blacklisted?
                                                <input type="checkbox" class="form-check-input"
                                                    formControlName="editisBlacklisted" id="editisBlacklisted">
                                                <i class="input-frame"></i>

                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <!-- Col -->
                                        <div class="form-group">
                                            <label class="control-label">Qualification</label>
                                            <input type="text" formControlName="editQualification" class="form-control"
                                                [(ngModel)]="editQualification" placeholder="Type here"
                                                name="editQualification">
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <!-- Col -->
                                        <div class="form-group">
                                            <label class="control-label">Experience</label>
                                            <input type="text" formControlName="editExperience" class="form-control"
                                                [(ngModel)]="editExperience" placeholder="Type here"
                                                name="editExperience">
                                        </div>
                                    </div>


                                </div>



                                <button type="submit" class="btn btn-primary mr-2">Submit</button>
                                <button class="btn btn-light" (click)="modal.close('by: close icon');">Cancel</button>

                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<!-- Modal -->
<ng-template #basicModal let-modal>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Select Appointment Letter Type</h5>
        <button type="button" class="close" (click)="modal.close('by: close icon')" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <h6>Upload the(<span class="text-warning">{{this.docuTypeRole}}</span>)appointment letter</h6>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" #closeAddExpenseModal
            (click)="modal.close('by: close button')">Close</button>
        <button type="button" class="btn btn-primary" (click)="modal.close('by: close button')"
            (click)="onUpload()">Save changes</button>
    </div>
</ng-template>
<!--update status-->
<!---new edit modal Lelouw-->
<ng-template #editModel5 let-modal>


    <form [formGroup]="validationForm">
        <div class="form-group">
            <div class="modal-body row">
                <div class="col-md-12 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-header">
                            Edit User
                        </div>
                        <div class="card-body">
                            <div class="row" style="margin-bottom: 1rem;">
                                <div class="col-md-12">
                                    <!--<button type="button" class="btn btn-primary btn-sm">Personal Information</button>-->
                                    <h6><B>Personal Information</B></h6>
                                </div>
                            </div>

                            <!--SRIKANTH  CHANGE LoggedinRole  "changed to ADMIN"- html code from Lelo-->

                            <!---persal numbe Start-->
                            <div class="row">
                                <div *ngIf="loggedInRole != 'ADMIN' && loggedInRole != 'ADMIN' && loggedInRole != 'ADMIN' "
                                    class="col-md-6">
                                    <div class="form-check form-check-flat form-check-primary">
                                        <label class="form-check-label">
                                            <input type="checkbox" formControlName="isEmployee"
                                                [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.isEmployee.errors}"
                                                (change)="validateIDnumber()" [(ngModel)]="isEmployee"
                                                class="form-check-input">
                                            <i class="input-frame"></i>
                                            GDE Employee<span class="required-asterisk">*</span>
                                        </label>
                                        <p *ngIf="isCreateFormSubmitted && createForm.isEmployee.errors?.required"
                                            class="invalid-feedback">Gender required</p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" *ngIf="persal!=''">
                                        <label for="persal" class="required">Persal Number <span
                                                class="required-asterisk">*</span></label>
                                        <input type="text" class="form-control" formControlName="persal" mask="00000000"
                                            maxlength="8"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.persal.errors   || isPersalExist}"
                                            [(ngModel)]="persal" id="persal" placeholder="Type here" name="persal" />
                                        <!-- [ngClass]="{'is-invalid': isEmployee && noEditIDnumber}" -->
                                        <!-- <p *ngIf="isEmployee && (idnumber = undefined || idnumber == '')"
                                                                    class="invalid-feedback">Please provide the user's ID number or persal number
                                                                </p> -->

                                        <p *ngIf="isDuplicatePersonal" class="invalid">Contact number already
                                            registered, please try
                                            another one</p>
                                        <p *ngIf="isCreateFormSubmitted && emptyUsernumber && nationality == 'South African'"
                                            class="invalid-feedback">
                                            Please provide the user's ID number or persal number
                                        </p>
                                        <p *ngIf="isCreateFormSubmitted && emptyUsernumber && nationality == 'Non South African'"
                                            class="invalid-feedback">
                                            Please provide the user's passport number or persal number
                                        </p>
                                        <p *ngIf="isCreateFormSubmitted && !createForm.persal.errors?.maxlength"
                                            class="invalid-feedback">Persal number must have 8 digits
                                        </p>
                                        <p class="invalid-feedback" *ngIf="isPersalExist">Provided Persal already exist,
                                            Please try new one</p>
                                    </div>
                                </div>

                            </div>


                            <!--Persal Numbeer end-->
                            <!--name start-->
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="firstname">Name <span class="required-asterisk">*</span></label>
                                    <input type="text" class="form-control" formControlName="firstname"
                                        [(ngModel)]="firstname" minlength="3" placeholder="Type here"
                                        [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.firstname.errors}">
                                    <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.required"
                                        class="invalid-feedback">First name required</p>
                                    <p *ngIf="isCreateFormSubmitted && !createForm.firstname.errors?.minlength"
                                        class="invalid-feedback">firstname must atleast 3 Characters
                                    </p>

                                    <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.pattern"
                                        class="invalid-feedback">firstname start with Captial Letters required</p>

                                </div>
                                <div class="col-md-6">
                                    <label for="surname">Surname <span class="required-asterisk">*</span></label>
                                    <input type="text" class="form-control" formControlName="surname" minlength="3"
                                        [(ngModel)]="surname" name="surname" id="surname" autocomplete="off"
                                        placeholder="Type here"
                                        [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.surname.errors}">
                                    <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.required"
                                        class="invalid-feedback">Surname required</p>
                                    <!-- <p class="text-danger mt-1" *ngIf="requried?.errors?.required">required error</p> -->
                                    <p *ngIf="isCreateFormSubmitted && !createForm.surname.errors?.minlength"
                                        class="invalid-feedback">Surname must atleast 3 Characters
                                    </p>

                                    <p *ngIf="isCreateFormSubmitted && createForm.surname.errors?.pattern"
                                        class="invalid-feedback">Surname start with Captial Letters required</p>

                                </div>


                            </div>
                            <!--name end-->
                            <!--nationlity start-->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="nationality">Nationality<span
                                                class="required-asterisk">*</span></label>
                                        <select [(ngModel)]="nationality" formControlName="nationality"
                                            name="nationality"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.nationality.errors}">
                                            <option value="" hidden disabled selected>Please select</option>
                                            <option *ngFor="let e of citizenList" [value]=e.citizenship>
                                                {{e.citizenship}}</option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.nationality.errors?.required"
                                            class="invalid-feedback">
                                            Nationality required</p>
                                        <!-- 
                                                            <input type="text" class="form-control" formControlName="nationality"
                                                                [(ngModel)]="nationality" id="nationality" value="South African" readonly /> -->
                                    </div>

                                </div>






                                <div class="col-md-6">
                                    <div *ngIf="nationality == 'South African'" class="form-group">
                                        <label for="idNumber">ID Number<span class="required-asterisk">*</span></label>
                                        <input type="text" class="form-control" formControlName="idnumber"
                                            [(ngModel)]="idNumber" id="idnumber" mask="0000000000000"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.idnumber.errors || emptyUsernumber || invalidIdNumber}"
                                            placeholder="Type here" pattern="[0-9]{13}" ngModel name="idnumber"
                                            minlength="13" maxlength="13" />
                                        <p *ngIf="isCreateFormSubmitted && noIDNumber" class="invalid-feedback">ID
                                            number required</p>
                                        <p *ngIf="createForm.idnumber.errors?.pattern || invalidIdNumber"
                                            class="invalid-feedback">Invalid south african ID number</p>

                                    </div>
                                    <div *ngIf="nationality == 'Non South African'" class="form-group">
                                        <label for="passport">Passport Number<span
                                                class="required-asterisk">*</span></label>
                                        <input type="text" class="form-control" formControlName="passport"
                                            [(ngModel)]="passport" id="passport" pattern="[a-zA-Z0-9]*"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.passport.errors || isCreateFormSubmitted && !passport && nationality == 'Non South African' && !persal}"
                                            placeholder="Type here" name="passport" />
                                        <p *ngIf="isCreateFormSubmitted && !passport && nationality == 'Non South African' && !persal && !isEmployee"
                                            class="invalid-feedback">Passport
                                            number required</p>
                                        <p *ngIf="isCreateFormSubmitted && createForm.passport.errors?.pattern"
                                            class="invalid-feedback">Invalid
                                            passport number</p>

                                    </div>
                                </div>

                            </div>
                            <!--nationlity end-->
                            <!--gender start-->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="gender">Gender <span class="required-asterisk">*</span></label>
                                        <select [(ngModel)]="gender"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.gender.errors}"
                                            formControlName="gender" required>
                                            <option value="" hidden disabled selected>Select Gender</option>
                                            <option *ngFor="let e of genderList" [value]=e.gender> {{e.gender}}</option>

                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.firstname.errors?.required"
                                            class="invalid-feedback">Gender required</p>

                                    </div>
                                </div>
                            </div>
                            <!--gender end-->



                            <!--end of  Lelo code html-->


                            <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;">
                                <div class="col-md-12">
                                    <!---- <h6>Account Information</h6> -->

                                </div>
                            </div>
                            <!--srikanht put commands-->
                            <div class="row">




                            </div>



                            <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;">
                                <div class="col-md-12">

                                    <h6><B>Office Level Information</B></h6>

                                </div>
                            </div>




                            <div class="row">



                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="officelevel">Office Level <span
                                                class="required-asterisk">*</span></label>

                                        <select [(ngModel)]="officelevel" formControlName="officelevel"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.officelevel.errors}"
                                            formControlName="officelevel" class="form-control"
                                            (change)="onChangeOffice(officelevel)">



                                            <option value="" hidden disabled selected>Please select</option>
                                            <option *ngFor="let e of OfficeLevelList"
                                                [hidden]="isLevelInvalid(e.officeLevel)" [value]=e.officeLevel>
                                                {{e.officeLevel}}</option>
                                        </select>






                                        <p *ngIf="isCreateFormSubmitted && createForm.officelevel.errors?.required"
                                            class="invalid-feedback">officelevel required</p>
                                    </div>
                                </div>


                                <div class="col-md-6">
                                    <!--done validation-->
                                    <div *ngIf="selectedSchoolName != 'undefined' && officelevel =='School' "
                                        class="form-group">
                                        <label for="selectedSchoolName">Select School Names <span
                                                class="required-asterisk">*</span></label>
                                        <ng-select [items]="schoolsMain" bindLabel="institutionName"
                                            bindValue="institutionName" [(ngModel)]="selectedSchoolName"
                                            formControlName="selectedSchoolName"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.selectedSchoolName.errors}"
                                            required (change)="onschoolchanges(selectedSchoolName)">
                                        </ng-select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.selectedSchoolName.errors?.required"
                                            class="invalid-feedback">Select School Names required</p>

                                    </div>
                                </div>





                                <div *ngIf="districtName !='undefined'  && officelevel =='District'" class="col-md-6">
                                    <div class="form-group">
                                        <label for="region">Region <span class="required-asterisk">*</span></label>
                                        <select (change)="onselectedregion(region)" [(ngModel)]="region"
                                            formControlName="region" name="region">

                                            <option value="0">Please select</option>
                                            <option *ngFor="let reg of regionsData" value="{{reg}}">{{reg}}</option>
                                        </select>

                                    </div>
                                </div>


                                <!--this is  sri district by regiononly-->
                                <div *ngIf="districtName !='undefined'  && officelevel =='District'" class="col-md-6">
                                    <div class="form-group">
                                        <label for="districtName">District Names <span
                                                class="required-asterisk">*</span></label>
                                        <select [(ngModel)]="districtName"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.districtName.errors}"
                                            formControlName="districtName" name="districtName" required>
                                            <option value="" hidden disabled selected>Please select</option>
                                            <!-- <option value="0">Please select</option> -->
                                            <option *ngFor="let dis of districtsData" [ngValue]="dis">{{dis}}</option>

                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.districtName.errors?.required"
                                            class="invalid-feedback">District Name required</p>

                                    </div>

                                </div>






                                <div *ngIf="showschool == true" class="col-md-6">

                                    <div class="form-group">
                                        <label for="selected">School Name</label>
                                        <select (change)="onschoolchange($event)" [(ngModel)]="selected"
                                            formControlName="selected" name="selected">
                                            <option value="0">Please select</option>
                                            <option *ngFor="let c of schoolsMain" value="{{c.institutionName}}">
                                                {{c.institutionName}}</option>
                                        </select>
                                    </div>
                                </div>





                                <div *ngIf="showdistricts == true" class="col-md-6">
                                    <div class="form-group" readonly>
                                        <label for="region">Region</label>
                                        <input type="text" class="form-control"
                                            style="background-color:#D3D3D3 ;">{{reg}}

                                    </div>
                                </div>

                                <div *ngIf="showdistricts == true " class="col-md-6">
                                    <div class="form-group">
                                        <label for="districtName">District Name </label>


                                        <input type="text" class="form-control" style="background-color:#D3D3D3 ;"
                                            formControlName="districtName" name="districtName"
                                            [(ngModel)]="districtName" *ngFor="let dis of districtsDatas"
                                            [ngValue]="dis">{{dis}}



                                        <p *ngIf="isCreateFormSubmitted && createForm.districtName.errors?.required"
                                            class="invalid-feedback">District Name required</p>

                                    </div>

                                </div>

                            </div>

                            <div class="row">
                                <div *ngIf="roleSelected != 'undefined' && officelevel =='School'" class="col-md-6">
                                    <div class="form-group">
                                        <label for="roleSelected">School Position <span
                                                class="required-asterisk">*</span></label>

                                        <select [(ngModel)]="roleSelected" formControlName="roleSelected"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.roleSelected.errors}"
                                            required>
                                            <option value="" hidden disabled selected>Please select</option>

                                            <option *ngFor="let e of schoolPositionList" [value]=e.schoolPosition>
                                                {{e.schoolPosition}}</option>
                                            <!--<option value="ADMIN">ADMIN</option>-->
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.roleSelected.errors?.required"
                                            class="invalid-feedback">SchoolPosition required</p>

                                    </div>

                                </div>
                            </div>






                            <div class="row">






                            </div>



                            <div *ngIf="showDistricinfo == true" class="row"
                                style="margin-bottom: 1rem; margin-top: 1rem;">
                                <div class="col-md-12">
                                    <!--<button type="button" class="btn btn-primary btn-sm">District Information </button>-->
                                    <h6><B>District Information</B></h6>
                                </div>
                            </div>
                            <!--lelo validation--->
                            <div *ngIf="Directorate != 'undefined' && officelevel =='District'" class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="Directorate">Directorate<span class="required-asterisk">*</span>
                                        </label>

                                        <select class="form-control" formControlName="Directorate"
                                            [(ngModel)]="Directorate" name="Directorate"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Directorate.errors}"
                                            required>
                                            <option value="" hidden disabled selected>Please select</option>
                                            <option value="0">Please select</option>
                                            <option *ngFor="let c of dispositiondatadir" value="{{c}}">{{c}}</option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.Directorate.errors?.required"
                                            class="invalid-feedback"> required</p>
                                    </div>
                                </div>

                                <div *ngIf="SubDirectorate != 'undefined' && officelevel =='District'" class="col-md-6">
                                    <div class="form-group">
                                        <label for="SubDirectorate">Sub-Directorate <span
                                                class="required-asterisk">*</span></label>
                                        <select (change)="Subdirectorate($event)" formControlName="SubDirectorate"
                                            [(ngModel)]="SubDirectorate" name="SubDirectorate"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.SubDirectorate.errors}"
                                            required>
                                            <option value="" hidden disabled selected>Please select</option>
                                            <option *ngFor="let c of dispositionsdatasub" value="{{c}}">{{c}}</option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.SubDirectorate.errors?.required"
                                            class="invalid-feedback"> required</p>
                                    </div>
                                </div>

                                <div *ngIf="roleSelected != 'undefined' && officelevel =='District'" class="col-md-6">
                                    <div class="form-group">
                                        <label for="roleSelected">Position/Role <span class="required-asterisk">*</span>
                                        </label>
                                        <select formControlName="roleSelected" [(ngModel)]="roleSelected"
                                            name="roleSelected"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.roleSelected.errors}"
                                            required (change)="Position($event)">
                                            <option value="" hidden disabled selected>Please select</option>
                                            <option value="0">Please select</option>
                                            <option *ngFor="let c of dispositionsdataposition" value="{{c}}">{{c}}
                                            </option>

                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.roleSelected.errors?.required"
                                            class="invalid-feedback"> required</p>
                                    </div>
                                </div>

                            </div>

                            <div *ngIf="showDistricinfo == true" class="row">

                            </div>

                            <div *ngIf="showHeadofficeinfo == true" class="row"
                                style="margin-bottom: 1rem; margin-top: 1rem;">
                                <div class="col-md-12">

                                    <h6><B>Head Office Information</B></h6>
                                </div>
                            </div>


                            <div *ngIf="Branch != 'undefined' && officelevel =='Head Office' && roleSelected !='System Administrator'"
                                class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="Branch">Branch <span class="required-asterisk">*</span> </label>
                                        <select (change)="onselectedbrach($event)" [(ngModel)]="Branch"
                                            formControlName="Branch" name="Branch"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Branch.errors}"
                                            required>
                                            <option value="0">Please select</option>
                                            <option *ngFor="let c of Branches" [ngValue]="c">{{c}}</option>

                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.Branch.errors?.required"
                                            class="invalid-feedback">required</p>
                                    </div>
                                </div>

                                <div *ngIf="ChiefDirectorate != 'undefined' && officelevel =='Head Office'"
                                    class="col-md-6">
                                    <div class="form-group">
                                        <label for="ChiefDirectorate">Chief Directorate <span
                                                class="required-asterisk">*</span></label>
                                        <select [(ngModel)]="ChiefDirectorate" formControlName="ChiefDirectorate"
                                            name="ChiefDirectorate"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.ChiefDirectorate.errors}"
                                            required>
                                            <option value="" hidden selected disabled>Please select</option>
                                            <option *ngFor="let c of BranchCD" [hidden]="!c" [ngValue]="c">{{c}}
                                            </option>

                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.ChiefDirectorate.errors?.required"
                                            class="invalid-feedback">required</p>

                                    </div>
                                </div>

                                <div *ngIf="Directorate != 'undefined'" class="col-md-6">
                                    <div class="form-group">
                                        <label for="Directorate">Directorate <span class="required-asterisk">*</span>
                                        </label>
                                        <select class="form-control" [(ngModel)]="Directorate"
                                            formControlName="Directorate" name="Directorate"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.Directorate.errors}"
                                            required>
                                            <option value="" hidden selected disabled>Please select</option>
                                            <option *ngFor="let c of HODData" [hidden]="!c" [ngValue]="c">{{c}}</option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.Directorate.errors?.required"
                                            class="invalid-feedback">required</p>
                                    </div>
                                </div>


                                <div *ngIf="SubDirectorate != 'undefined' && officelevel =='Head Office' "
                                    class="col-md-6">
                                    <div class="form-group">
                                        <label for="SubDirectorate">Sub-Directorate <span
                                                class="required-asterisk">*</span></label>
                                        <select class="form-control" [(ngModel)]="SubDirectorate"
                                            formControlName="SubDirectorate" name="SubDirectorate"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.SubDirectorate.errors}"
                                            required>
                                            <option value="" hidden selected disabled>Please select</option>
                                            <option *ngFor="let c of HOSDData" [hidden]="!c" [ngValue]="c">{{c}}
                                            </option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.SubDirectorate.errors?.required"
                                            class="invalid-feedback">required</p>
                                    </div>
                                </div>
                                <div *ngIf="roleSelected != 'undefined' " class="col-md-6">
                                    <div class="form-group">
                                        <label for="roleSelected">Position <span
                                                class="required-asterisk">*</span></label>
                                        <select [(ngModel)]="roleSelected" formControlName="roleSelected"
                                            name="roleSelected"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.roleSelected.errors}"
                                            required>

                                            <option value="0">Please select</option>
                                            <option *ngFor="let c of HOPOsition" value="{{c}}">{{c}}</option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.roleSelected.errors?.required"
                                            class="invalid-feedback"> required</p>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="roleSelected != 'undefined' && roleSelected =='System Administrator'"
                                class="col-md-6">
                                <div class="form-group">
                                    <label for="roleSelected">Position <span class="required-asterisk">*</span></label>
                                    <input class="form-control" [(ngModel)]="roleSelected"
                                        formControlName="roleSelected" name="roleSelected"
                                        [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.roleSelected.errors}"
                                        required>

                                    <!----<option value="0">Please select</option>
                                        <option *ngFor="let c of HOPOsition" value="{{c}}">{{c}}</option>
                                    </select> --->
                                    <p *ngIf="isCreateFormSubmitted && createForm.roleSelected.errors?.required"
                                        class="invalid-feedback"> required</p>
                                </div>
                            </div>


                            <div class="row" style="margin-bottom: 1rem; margin-top:1rem;">
                                <div class="col-md-12">

                                </div>
                            </div>





                            <p *ngIf="showHide('parent')" class="text-center">Home Address</p>
                            <div *ngIf="showHide('parent')" class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="StreetAddress1">Address 1</label>
                                        <input type="text" class="form-control" formControlName="StreetAddress1"
                                            [(ngModel)]="StreetAddress1" id="StreetAddress1" placeholder="Type here">
                                    </div>
                                </div>


                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="StreetAddress2">Address 2</label>
                                        <input type="text" class="form-control" formControlName="StreetAddress2"
                                            [(ngModel)]="StreetAddress2" id="StreetAddress2" placeholder="Type here">
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="showHide('parent')" class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="StreetAddress3">Address 3</label>
                                        <input type="text" class="form-control" formControlName="StreetAddress3"
                                            [(ngModel)]="StreetAddress3" id="StreetAddress3" placeholder="Type here">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="StreetCode">Postal Code</label>
                                        <input type="text" class="form-control" formControlName="StreetCode" mask="0000"
                                            [(ngModel)]="StreetCode" id="StreetCode" placeholder="Type here">
                                    </div>
                                </div>
                            </div>

                            <p *ngIf="showHide('parent')" class="text-center">Postal Address</p>
                            <div *ngIf="showHide('parent')" class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="PostalAddress1">Address 1</label>
                                        <input type="text" class="form-control" formControlName="PostalAddress1"
                                            [(ngModel)]="PostalAddress1" id="PostalAddress1" placeholder="Type here">
                                        <!-- <p class="text-danger mt-1" *ngIf="requried?.errors?.required">required error</p> -->
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="PostalAddress2">Address 2</label>
                                        <input type="text" class="form-control" formControlName="PostalAddress2"
                                            [(ngModel)]="PostalAddress2" id="PostalAddress2" placeholder="Type here">
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="showHide('parent')" class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="PostalAddress3">Address 3</label>
                                        <input type="text" class="form-control" formControlName="PostalAddress3"
                                            [(ngModel)]="PostalAddress3" id="PostalAddress3" placeholder="Type here">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="PostalCode">Postal Code</label>
                                        <input type="text" class="form-control" formControlName="PostalCode" mask="0000"
                                            [(ngModel)]="PostalCode" id="PostalCode" placeholder="Type here">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-check form-check-flat form-check-primary">
                                        <label class="form-check-label">
                                            <input type="checkbox" class="form-check-input"
                                                [(ngModel)]="informalsettlement " formControlName="informalsettlement">
                                            <i class="input-frame"></i>
                                            Informal Settlement
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <!------>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="House">House/Stand/Erf Number</label>
                                        <input type="text" class="form-control" formControlName="House"
                                            [(ngModel)]="House" placeholder="Type here">

                                    </div>
                                </div>
                                <!------>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="complex">Complex Name & Unit No.</label>
                                        <input type="text" class="form-control" formControlName="complex"
                                            [(ngModel)]="complex" id="complex" autocomplete="off"
                                            placeholder="Type here">
                                        <!-- <p class="text-danger mt-1" *ngIf="requried?.errors?.required">required error</p> -->
                                    </div>
                                </div>
                            </div>
                            <!------>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="street">Street Name</label>
                                        <input type="text" class="form-control" formControlName="street"
                                            [(ngModel)]="street" id="street" autocomplete="off" placeholder="Type here">

                                    </div>
                                </div>
                                <!------>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="section">Section</label>
                                        <input type="text" class="form-control" formControlName="section"
                                            [(ngModel)]="section" id="section" autocomplete="off"
                                            placeholder="Type here">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="city">City</label>
                                        <input type="text" class="form-control" formControlName="city"
                                            [(ngModel)]="city" id="city" autocomplete="off" placeholder="Type here">
                                    </div>
                                </div>
                            </div>
                            <!--contact details-->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cellNumber">Contact Number</label>
                                        <input class="form-control" formControlName="cellNumber"
                                            [(ngModel)]="cellNumber" id="cellNumber" mask="000 000 0000"
                                            (change)="uniqueCell(cellNumber)" placeholder="Type here" minlength="0"
                                            maxlength="12" (keyup)="fieldChange()"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.cellNumber.errors || isNumberInvalid && isCreateFormSubmitted || isCellnumberDuplicate}">
                                        <p *ngIf="isCreateFormSubmitted && createForm.cellNumber.errors?.required"
                                            class="invalid-feedback">Contact number required</p>
                                        <p *ngIf="isCreateFormSubmitted && isNumberInvalid && !isCellnumberDuplicate && !createForm.cellNumber.errors?.required || isCreateFormSubmitted && !isCellnumberDuplicate && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                                            class="invalid-feedback">Invalid contact number</p>
                                        <p *ngIf="uniqueCellNumber" class="asterisk">Contact number already
                                            registered, please try
                                            another one</p>
                                        <p *ngIf="isCreateFormSubmitted && !createForm.cellNumber.errors?.maxlength && !createForm.cellNumber.errors?.required"
                                            class="invalid-feedback">Contact number must have 10 digits</p>
                                    </div>



                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="emailAddress">Email Address</label>
                                        <input type="email" class="form-control" formControlName="emailAddress"
                                            [(ngModel)]="emailAddress" id="emailAddress" placeholder="Type here"
                                            inputmode="email" pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.emailAddress.errors}">
                                        <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.required"
                                            class="invalid-feedback">Email address required</p>
                                        <p *ngIf="isCreateFormSubmitted && createForm.emailAddress.errors?.pattern"
                                            class="invalid-feedback">Invalid email address</p>
                                    </div>
                                </div>
                            </div>



                            <div class="row">
                                <div class="col-md-6" *ngIf="showHide('district')">
                                    <div class="form-group">
                                        <label for="districtCode">District</label>
                                        <select [(ngModel)]="districtCode" formControlName="districtCode"
                                            (change)="getSchools(districtCode,false)"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.districtCode.errors}">
                                            <option value="" hidden disabled selected>Please select</option>
                                            <option *ngFor="let dist of districts" value={{dist.code}}>
                                                {{dist.districtName}}
                                            </option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.districtCode.errors?.required"
                                            class="invalid-feedback">District required</p>
                                    </div>
                                </div>
                                <div class="col-md-6" *ngIf="showHide('school')">
                                    <div class="form-group">
                                        <label for="emisNumber">School Name</label>
                                        <select [(ngModel)]="emisNumber" formControlName="emisNumber"
                                            (change)="getSchoolName(emisNumber,false)"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.emisNumber.errors}">
                                            <option value="" hidden disabled selected>Please select</option>
                                            <option [hidden]="districtCode" value="-1" disabled>Please select district
                                                first</option>
                                            <option *ngFor="let school of schools" value={{school.emisCode}}>
                                                {{school.institutionName}}</option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.emisNumber.errors?.required"
                                            class="invalid-feedback">School required</p>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;" *ngIf="showHide('seo')">
                                <div class="col-md-12">
                                    <p class="text-center text-info"><i class="mdi mdi-information-outline"></i> Please
                                        select the school that {{firstname}} {{surname}} is primarily assigned to</p>
                                </div>
                            </div> -->
                            <div class="row" style="margin-bottom: 1rem; margin-top: 1rem;" *ngIf="showHide('seo')">
                                <div class="col-md-12">
                                    <p class="text-center text-info"><i class="mdi mdi-information-outline"></i> Please
                                        select the school that {{firstname}} {{surname}} is assigned to as a School
                                        Electoral Officer</p>
                                </div>
                            </div>
                            <div class="row" *ngIf="showHide('seo')">
                                <!-- <div *ngIf="false" class="col-md-6">
                                    <div class="form-group">
                                        <label for="districtCode">District</label>
                                        <select [(ngModel)]="districtCode" formControlName="districtCode"
                                            (change)="getSchools(districtCode, true)"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.seoDistrictCode.errors}">
                                            <option value="" hidden disabled selected>Please select</option>
                                            <option *ngFor="let dist of districts" value={{dist.code}}>
                                                {{dist.districtName}}
                                            </option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.seoDistrictCode.errors?.required"
                                            class="invalid-feedback">District required</p>
                                    </div>
                                </div> -->
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="seoEmisNumber">School Name</label>
                                        <select [(ngModel)]="seoEmisNumber" formControlName="seoEmisNumber"
                                            (change)="getSchoolName(seoEmisNumber, true)"
                                            [ngClass]="{'is-invalid': isCreateFormSubmitted && createForm.seoEmisNumber.errors}">
                                            <option value="" hidden disabled selected>Please select</option>
                                            <option [hidden]="districtCode" value="-1" disabled>Please select
                                                district first</option>
                                            <option *ngFor="let seoSchool of seoSchools" value={{seoSchool.emisCode}}>
                                                {{seoSchool.institutionName}}</option>
                                        </select>
                                        <p *ngIf="isCreateFormSubmitted && createForm.seoEmisNumber.errors?.required"
                                            class="invalid-feedback">School required</p>
                                    </div>
                                </div>
                            </div>








                            <div class="row">
                                <button type="submit" class="btn btn-primary mr-2">Submit</button>
                                <button class="btn btn-light" (click)="Cancel()">Cancel</button>

                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>

    </form>

</ng-template>